(this.webpackJsonpdiycollections=this.webpackJsonpdiycollections||[]).push([[0],{452:function(e,t){},456:function(e,t){},498:function(e,t,a){},644:function(e,t){},645:function(e,t){},671:function(e,t){},672:function(e,t){},673:function(e,t){},674:function(e,t){},675:function(e,t){},676:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),i=a(49),c=a(120),l=a(9),o={serverEndpoint:"https://sit.thesystem.co.za/sitintegration"},u=new(a(730).a)(null),d={login:function(e,t){return A.post("/users/authenticate",{email:e,password:t}).then((function(e){return console.log(e),"Error"===e.status||(u.next(e),m()),e}))},logout:j,refreshToken:b,register:function(e){return A.post("/users/register",e)},verifyEmail:function(e){return A.post("/users/verify-email",{token:e})},forgotPassword:function(e){return A.post("/users/forgot-password",{email:e})},validateResetToken:function(e){return A.post("/users/validate-reset-token",{token:e})},resetPassword:function(e){var t=e.token,a=e.password,n=e.confirmPassword;return A.post("/users/reset-password",{token:t,password:a,confirmPassword:n})},setNewPassword:function(e){var t=e.token,a=e.password,n=e.confirmPassword;return A.post("/users/set-password",{token:t,password:a,confirmPassword:n})},deactivateUser:function(e){return A.put("/users/deactivate/".concat(e))},reactivateUser:function(e){return A.put("/users/reactivate/".concat(e))},resendInvitation:function(e){return A.post("/users/resend-invitation/".concat(e))},getAll:function(){return A.get("/users")},getById:function(e){return A.get("/users/".concat(e))},create:function(e){return A.post("/users",e)},update:function(e,t){return A.put("/users/".concat(e),t).then((function(e){return e.id===u.value.id&&(e=Object(l.a)(Object(l.a)({},u.value),e),u.next(e)),e}))},delete:function(e){return A.delete("/users/".concat(e)).then((function(t){return e===u.value.id&&j(),t}))},user:u.asObservable(),get userValue(){return u.value}};function j(){A.post("/users/revoke-token",{}),clearTimeout(n),u.next(null),g.push("/login")}function b(){return A.post("/users/refresh-token",{}).then((function(e){return u.next(e),m(),e}))}function m(){var e=JSON.parse(atob(u.value.jwtToken.split(".")[1])),t=new Date(1e3*e.exp).getTime()-Date.now()-6e4;n=setTimeout(b,t)}var A={get:function(e){var t={method:"GET",headers:h(e)};return fetch("".concat(o.serverEndpoint).concat(e),t).then(f)},getDocument:function(e,t){var a={method:"POST",headers:Object(l.a)({Accept:"application/json, application/x-www-form-urlencoded","Content-Type":"application/json"},h(e)),credentials:"include",body:JSON.stringify(t)};return fetch("".concat(o.serverEndpoint).concat(e),a).then(p)},post:function(e,t){var a={method:"POST",headers:Object(l.a)({"Content-Type":"application/json"},h(e)),credentials:"include",body:JSON.stringify(t)};return fetch("".concat(o.serverEndpoint).concat(e),a).then(f)},put:function(e,t){var a={method:"PUT",headers:Object(l.a)({"Content-Type":"application/json"},h(e)),body:JSON.stringify(t)};return fetch("".concat(o.serverEndpoint).concat(e),a).then(f)},delete:function(e){var t={method:"DELETE",headers:h(e)};return fetch("".concat(o.serverEndpoint).concat(e),t).then(f)}};function h(e){var t=d.userValue;return t&&t.jwtToken?{Authorization:"Bearer ".concat(t.jwtToken)}:{}}function f(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){[401,403].includes(e.status)&&d.userValue&&d.logout();var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}function p(e){return e.text().then((function(t){var a=t;if(!e.ok){[401,403].includes(e.status)&&d.userValue&&d.logout();var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var O=a(75),g=Object(O.a)(),x={Admin:"Admin",Agent:"Agent",Kam:"Kam",Super:"Super",User:"User"},C=(a(497),a(498),a(732)),v=a(187),I=a(1),y=["component","roles"];function N(e){var t=e.component,a=e.roles,n=Object(v.a)(e,y);return Object(I.jsx)(i.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){var n=d.userValue;return n?a&&-1===a.indexOf(n.role)?Object(I.jsx)(i.a,{to:{pathname:"/"}}):Object(I.jsx)(t,Object(l.a)({},e)):Object(I.jsx)(i.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var w=a(470),D=a(13),k=a(11),S=a.n(k),P=a(19),R=a(24),T=a(23),E=a(29),V=a(43),F=a(751),M=a(746),z=a(755),L=a(756),B=a(748),H=a(758),U=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(){return Object(R.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"getStylesDashboard",value:function(){var e="#003d6a";return{parent:{background:"#ffffff",border:"1px solid #000000",boxSizing:"border-box",display:"inline",height:"275",margin:"15px 3px",fontFamily:"'Fira Sans', sans-serif"},title:{textAnchor:"start",verticalAnchor:"end",fill:"#333740",fontFamily:"inherit",fontSize:"18px",fontWeight:"bold"},labelNumber:{textAnchor:"middle",fill:"#ffffff",fontFamily:"inherit",fontSize:"14px"},axisX:{axis:{stroke:"black",strokeWidth:1},domainPadding:{x:20,y:5},tickLabels:{fill:"#333740",fontFamily:"inherit",fontSize:10}},axisOne:{grid:{stroke:function(e){return-10===e.tick?"transparent":"#a8abac"},strokeWidth:2},axis:{stroke:e,strokeWidth:0},ticks:{strokeWidth:0},tickLabels:{fill:e,fontFamily:"inherit",fontSize:10,padding:3}},labelOne:{fill:e,fontFamily:"inherit",fontSize:12,fontStyle:"italic"},barOne:{data:{fill:"#2062ae"}},axisOneCustomLabel:{fill:e,fontFamily:"inherit",fontWeight:300,fontSize:21}}}},{key:"getStylesMain",value:function(){var e="#003d6a";return{parent:{background:"#ffffff",border:"1px solid #000000",boxSizing:"border-box",display:"inline",height:"80vh",margin:"15px 3px",fontFamily:"'Fira Sans', sans-serif"},title:{textAnchor:"start",verticalAnchor:"end",fill:"#333740",fontFamily:"inherit",fontSize:"18px",fontWeight:"bold"},labelNumber:{textAnchor:"middle",fill:"#ffffff",fontFamily:"inherit",fontSize:"14px"},axisX:{axis:{stroke:"black",strokeWidth:1},domainPadding:{x:20,y:5},tickLabels:{fill:"#333740",fontFamily:"inherit",fontSize:10}},axisOne:{grid:{stroke:function(e){return-10===e.tick?"transparent":"#a8abac"},strokeWidth:2},axis:{stroke:e,strokeWidth:0},ticks:{strokeWidth:0},tickLabels:{fill:e,fontFamily:"inherit",fontSize:10,padding:3}},labelOne:{fill:e,fontFamily:"inherit",fontSize:12,fontStyle:"italic"},barOne:{data:{fill:"#2062ae"}},axisOneCustomLabel:{fill:e,fontFamily:"inherit",fontWeight:300,fontSize:21}}}},{key:"getStylesSidebar",value:function(){var e="#003d6a";return{parent:{background:"#ffffff",border:"1px solid #000000",boxSizing:"border-box",display:"inline",height:"200",margin:"15px 3px",fontFamily:"'Fira Sans', sans-serif"},title:{textAnchor:"start",verticalAnchor:"end",fill:"#333740",fontFamily:"inherit",fontSize:"18px",fontWeight:"bold"},labelNumber:{textAnchor:"middle",fill:"#ffffff",fontFamily:"inherit",fontSize:"14px"},axisX:{axis:{stroke:"black",strokeWidth:1},domainPadding:{x:20,y:5},tickLabels:{fill:"#333740",fontFamily:"inherit",fontSize:10}},axisOne:{grid:{stroke:function(e){return-10===e.tick?"transparent":"#a8abac"},strokeWidth:2},axis:{stroke:e,strokeWidth:0},ticks:{strokeWidth:0},tickLabels:{fill:e,fontFamily:"inherit",fontSize:10,padding:3}},labelOne:{fill:e,fontFamily:"inherit",fontSize:12,fontStyle:"italic"},barOne:{data:{fill:"#2062ae"}},axisOneCustomLabel:{fill:e,fontFamily:"inherit",fontWeight:300,fontSize:21}}}},{key:"getDataSetOne",value:function(){return this.props.data}},{key:"whichStyle",value:function(){switch(this.props.styleType){case"dash":return this.getStylesDashboard();case"main":return this.getStylesMain();case"sidebar":return this.getStylesSidebar();default:return this.getStylesMain()}}},{key:"render",value:function(){var e=this.props,t=e.chartNumber,a=e.description,n=e.title,r=this.whichStyle(),s=this.getDataSetOne();return Object(I.jsxs)("svg",{style:r.parent,viewBox:"0 0 450 350",children:[Object(I.jsx)("rect",{x:"0",y:"0",width:"10",height:"30",fill:"#ee303d"}),Object(I.jsx)("rect",{x:"420",y:"10",width:"20",height:"20",fill:"#517790"}),Object(I.jsx)(F.a,{x:25,y:24,style:r.title,text:n}),Object(I.jsx)(F.a,{x:430,y:20,style:r.labelNumber,text:t+1}),Object(I.jsx)(F.a,{x:25,y:55,style:r.labelOne,text:a}),Object(I.jsx)("g",{transform:"translate(0, 40)",children:Object(I.jsxs)(M.a,{animate:{duration:2e3,easing:"backOut",onLoad:{duration:1e3}},containerComponent:Object(I.jsx)(z.a,{responsive:!1}),domainPadding:{x:20,y:5},standalone:!1,children:[Object(I.jsx)(L.a,{standalone:!1,style:r.axisX}),Object(I.jsx)(L.a,{dependentAxis:!0,standalone:!1,style:r.axisOne,tickFormat:function(e){return"R ".concat(Math.round(e)/1e3," k")}}),Object(I.jsx)(B.a,{labelComponent:Object(I.jsx)(H.a,{dy:0,centerOffset:{x:25},renderInPortal:!1,style:r.axisOneCustomLabel}),labels:function(e){var t=e.datum;return["R ".concat(Math.round(t.value/1e3)," k")]},data:s,standalone:!1,style:r.barOne,x:"name",y:"value"})]})})]})}}]),a}(s.a.Component),Y=a(753),q=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(){return Object(R.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"getStylesMain",value:function(){var e="#00a3de";return{parent:{background:"#0F5A99",boxSizing:"border-box",display:"inline",height:"350",padding:0,fontFamily:"'Fira Sans', sans-serif"},title:{textAnchor:"start",verticalAnchor:"end",fill:"#000000",fontFamily:"inherit",fontSize:"18px",fontWeight:"bold"},labelNumber:{textAnchor:"middle",fill:"#ffffff",fontFamily:"inherit",fontSize:"14px"},axisX:{axis:{stroke:"black",strokeWidth:1},domainPadding:{x:20,y:5},tickLabels:{fill:"black",fontFamily:"inherit",fontSize:10}},axisOne:{grid:{stroke:function(e){return-10===e.tick?"transparent":"#ffffff"},strokeWidth:2},axis:{stroke:e,strokeWidth:0},ticks:{strokeWidth:0},tickLabels:{fill:e,fontFamily:"inherit",fontSize:10,padding:3}},labelOne:{fill:e,fontFamily:"inherit",fontSize:12,fontStyle:"italic"},barLine:{data:{stroke:"#422590",strokeWidth:function(e){return e.data.length}},labels:{fontSize:15,fill:function(e){return 3===e.datum.x?"#000000":"#c43a31"}}},axisOneCustomLabel:{fill:e,fontFamily:"inherit",fontWeight:300,fontSize:21}}}},{key:"getStylesDashboard",value:function(){var e="#00a3de";return{parent:{background:"#0F5A99",boxSizing:"border-box",display:"inline",height:"200",padding:0,fontFamily:"'Fira Sans', sans-serif"},title:{textAnchor:"start",verticalAnchor:"end",fill:"#000000",fontFamily:"inherit",fontSize:"20px",fontWeight:"bold"},labelNumber:{textAnchor:"middle",fill:"#ffffff",fontFamily:"inherit",fontSize:"14px"},axisX:{axis:{stroke:"black",strokeWidth:1},domainPadding:{x:20,y:5},tickLabels:{fill:"black",fontFamily:"inherit",fontSize:10}},axisOne:{grid:{stroke:function(e){return-10===e.tick?"transparent":"#ffffff"},strokeWidth:2},axis:{stroke:e,strokeWidth:0},ticks:{strokeWidth:0},tickLabels:{fill:e,fontFamily:"inherit",fontSize:10,padding:3}},labelOne:{fill:e,fontFamily:"inherit",fontSize:18,fontStyle:"italic"},barLine:{data:{fill:"#422590"}},axisOneCustomLabel:{fill:e,fontFamily:"inherit",fontWeight:300,fontSize:21}}}},{key:"getDataSetOne",value:function(){return this.props.data}},{key:"render",value:function(){var e=this.props,t=e.chartNumber,a=e.description,n=e.styleType,r=e.title,s="dash"===n?this.getStylesDashboard():this.getStylesMain(),i=this.getDataSetOne();return Object(I.jsxs)("svg",{style:s.parent,viewBox:"0 0 450 350",children:[Object(I.jsx)("rect",{x:"0",y:"0",width:"10",height:"30",fill:"#f01616"}),Object(I.jsx)("rect",{x:"420",y:"10",width:"20",height:"20",fill:"#458ca8"}),Object(I.jsx)(F.a,{x:25,y:24,style:s.title,text:r}),Object(I.jsx)(F.a,{x:430,y:20,style:s.labelNumber,text:t+1}),Object(I.jsx)(F.a,{x:25,y:55,style:s.labelOne,text:a}),Object(I.jsx)("g",{transform:"translate(0, 40)",children:Object(I.jsxs)(M.a,{animate:{duration:2e3,easing:"backOut",onLoad:{duration:1e3}},containerComponent:Object(I.jsx)(z.a,{responsive:!1}),domainPadding:{x:20,y:5},standalone:!1,children:[Object(I.jsx)(L.a,{standalone:!1,style:s.axisX}),Object(I.jsx)(L.a,{dependentAxis:!0,standalone:!1,style:s.axisOne,tickFormat:function(e){return"".concat(Math.round(e)," %")}}),Object(I.jsx)(Y.a,{labelComponent:Object(I.jsx)(H.a,{dy:0,centerOffset:{x:25},renderInPortal:!1,style:s.axisOneCustomLabel}),labels:function(e){var t=e.datum;return["".concat(Math.round(t.value)," %")]},data:i,standalone:!1,style:s.barLine,x:"name",y:"value"})]})})]})}}]),a}(s.a.Component),W={getReport:function(e){return A.get("/reports/".concat(e))}};var G=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(R.a)(this,a),(n=t.call(this,e)).state={reports:{ids:["aging","agentPTP","datePTP"],entities:{aging:{data:null,description:"Amount owed per period",title:"Aging",type:"bar"},agentPTP:{data:null,description:"PTP sum per agent",title:"PTP by Agent",type:"bar"},datePTP:{data:null,description:"PTP sum per date",title:"PTP by Date",type:"bar"}}}},n}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.scrollTo(0,0),this.loadData(),this.interval=setInterval((function(){return e.loadData()}),18e5)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"loadData",value:function(){var e=this;this.state.reports.ids.forEach(function(){var t=Object(P.a)(S.a.mark((function t(a){var n,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.state.reports.entities[a]).data=null,e.setState(Object(l.a)(Object(l.a)({},e.state),{},{reportObject:n})),t.next=5,W.getReport(a);case 5:r=t.sent,n.data=e.prepData(r),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{reportObject:n}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"prepData",value:function(e){var t=[];if(1===e.length)for(var a=0,n=Object.entries(e[0]);a<n.length;a++){var r=Object(D.a)(n[a],2),s=r[0],i=r[1],c={};c.name=s,c.value=i,t.push(c)}else for(var l=0;l<e.length;l++){for(var o=Object.entries(e[l]),u={},d=0,j=Object.entries(o);d<j.length;d++){var b=Object(D.a)(j[d],2),m=b[0],A=b[1];"0"===m&&(u.name=A[1]),"1"===m&&(u.value=A[1])}t.push(u)}return t}},{key:"customChartRender",value:function(){var e=this.state.reports,t=this.props.styleType;return e.ids.map((function(a,n){return"bar"===e.entities[a].type?Object(I.jsxs)("span",{children:[e.entities[a].data&&Object(I.jsx)(U,{chartNumber:n,data:e.entities[a].data,description:e.entities[a].description,styleType:t,title:e.entities[a].title}),!e.entities[a].data&&Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"ui active inverted dimmer",children:Object(I.jsx)("div",{className:"ui text loader",children:"Loading"})}),Object(I.jsx)("p",{})]},n)]},n):"line"===e.entities[a].type?Object(I.jsxs)("span",{children:[e.entities[a].data&&Object(I.jsx)(q,{chartNumber:n,data:e.entities[a].data,description:e.entities[a].description,styleType:t,title:e.entities[a].title}),!e.entities[a].data&&Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"ui active inverted dimmer",children:Object(I.jsx)("div",{className:"ui text loader",children:"Loading"})}),Object(I.jsx)("p",{})]},n)]},n):Object(I.jsx)("div",{children:" No report type found"},n)}))}},{key:"render",value:function(){return Object(I.jsx)(C.a,{fluid:!0,children:this.customChartRender()})}}]),a}(s.a.Component),Z=a(733),K=a(165),J=a(392),X=a(35),Q={getAll:function(){return A.get("/queues")}};var _=function(){var e,t,a=d.userValue,n=Object(r.useState)(null),s=Object(D.a)(n,2),i=s[0],c=s[1];function l(e){var t=[];return e.forEach((function(e){t.push(e.currentStatus)})),t.filter(o)}function o(e,t,a){return a.indexOf(e)===t}return Object(r.useEffect)((function(){Q.getAll().then((function(e){return c(e)}))}),[]),i?0===i.length?(e=Object(I.jsx)("div",{children:"None found"}),t=Object(I.jsx)("div",{children:"None found"})):(e=function(e){return function(e,t){var a=[];return t.forEach((function(t){var n=0;e.forEach((function(e){e.currentStatus===t&&++n})),a.push({item:t,count:n})})),a}(e,l(e)).map((function(e,t){return Object(I.jsxs)(Z.a.Item,{as:X.a,to:{pathname:"/collections",state:{caseStatus:e.item}},children:[Object(I.jsx)(Z.a.Content,{floated:"left",verticalAlign:"middle",children:e.item}),Object(I.jsx)(Z.a.Content,{floated:"right",verticalAlign:"middle",children:Object(I.jsx)(K.a,{circular:!0,children:e.count})})]},t)}))}(i),t=function(e,t){return function(e,t,a){var n=[];return t.forEach((function(t){var r=0;e.forEach((function(e){e.currentStatus===t&&e.currentAssignment===a&&++r})),n.push({item:t,count:r})})),n}(e,l(e),t.email).map((function(e,t){return Object(I.jsxs)(Z.a.Item,{as:X.a,to:"/collections",children:[Object(I.jsx)(Z.a.Content,{floated:"left",verticalAlign:"middle",children:e.item}),Object(I.jsx)(Z.a.Content,{floated:"right",verticalAlign:"middle",children:Object(I.jsx)(K.a,{circular:!0,children:e.count})})]},t)}))}(i,a)):(e=Object(I.jsx)("div",{children:"Loading"}),t=Object(I.jsx)("div",{children:"Loading"})),Object(I.jsx)(w.a,{container:!0,children:Object(I.jsx)(w.a.Column,{textAlign:"left",children:Object(I.jsx)(J.a,{raised:!0,children:Object(I.jsxs)(Z.a,{animated:!0,divided:!0,link:!0,selection:!0,children:[Object(I.jsx)(K.a,{as:"a",className:"queue label",ribbon:!0,children:"Department Queues"}),e,Object(I.jsx)("br",{}),Object(I.jsx)(K.a,{as:"a",className:"queue label",ribbon:!0,children:"User Queues"}),t]})})})})},$=a(754),ee=a(749),te=function(){var e={parent:{boxSizing:"border-box",display:"inline",height:"250",padding:0,fontFamily:"'Fira Sans', sans-serif"},title:{textAnchor:"start",verticalAnchor:"end",fill:"#333740",fontFamily:"inherit",fontSize:"50px",fontWeight:"bold"},chartNumber:{textAnchor:"middle",fill:"#ffffff",fontFamily:"inherit",fontSize:"14px"},description:{fill:"#787C82",fontFamily:"inherit",fontSize:25,fontStyle:"italic"},axisX:{ticks:{stroke:"#787C82",size:5},tickLabels:{fill:"#333740",fontSize:25,padding:5}},axixY:{grid:{stroke:"#787C82",strokeWidth:1},ticks:{stroke:"#787C82",size:5},tickLabels:{fill:"#333740",fontSize:25,padding:5}}};return Object(I.jsxs)("svg",{style:e.parent,viewBox:"-45 0 2120 480",children:[Object(I.jsx)(F.a,{x:55,y:45,style:e.title,text:"Owed, PTP and Collections"}),Object(I.jsx)(F.a,{x:430,y:20,style:e.chartNumber,text:"1"}),Object(I.jsx)(F.a,{x:55,y:65,style:e.description,text:"Previous six months"}),Object(I.jsx)("g",{transform:"translate(0, 40)",children:Object(I.jsxs)(M.a,{animate:{duration:2e3,easing:"backOut",onLoad:{duration:1e3}},containerComponent:Object(I.jsx)(z.a,{responsive:!1}),height:455,standalone:!1,width:1990,children:[Object(I.jsx)($.a,{animate:{duration:2e3,onLoad:{duration:1e3}},data:[{x:"Jan 21",y:1e5},{x:"Feb 21",y:112244},{x:"Mar 21",y:232211},{x:"Apr 21",y:175e3},{x:"May 21",y:213133}],style:{data:{fill:"#00B6F0",fillOpacity:1}}}),Object(I.jsx)($.a,{animate:{duration:2e3,onLoad:{duration:1e3}},data:[{x:"Jan 21",y:75e3},{x:"Feb 21",y:84183},{x:"Mar 21",y:174158.25},{x:"Apr 21",y:131250},{x:"May 21",y:159849.75}],style:{data:{fill:"#0062AE",fillOpacity:1}}}),Object(I.jsx)($.a,{animate:{duration:2e3,onLoad:{duration:1e3}},data:[{x:"Jan 21",y:63e3},{x:"Feb 21",y:70713.72},{x:"Mar 21",y:146292.93},{x:"Apr 21",y:110250},{x:"May 21",y:134273.79}],style:{data:{fill:"#003D6A",fillOpacity:1}}}),Object(I.jsx)(L.a,{dependentAxis:!0,standalone:!1,style:e.axixY,tickFormat:function(e){return"R ".concat(Math.round(e)/1e3," k")}}),Object(I.jsx)(L.a,{standalone:!1,style:e.axisX}),Object(I.jsx)(ee.a,{x:1500,y:300,background:"#cdc2b4",centerTitle:!0,orientation:"horizontal",gutter:30,standalone:!1,style:{border:{fill:"#787c82",stroke:"white"}},data:[{name:"Owed",symbol:{fill:"#00B6F0",fillOpacity:1},labels:{fill:"white",fontSize:25}},{name:"PTP",symbol:{fill:"#0062AE",fillOpacity:1},labels:{fill:"white",fontSize:25}},{name:"Collected",symbol:{fill:"#003D6A",fillOpacity:1},labels:{fill:"white",fontSize:25}}]})]})})]})},ae=a.p+"static/media/mie_logo.51cbe18c.png",ne=function(){return s.a.useEffect((function(){window.scrollTo(0,0)}),[]),Object(I.jsx)(C.a,{fluid:!0,children:Object(I.jsxs)(w.a,{celled:"internally",stackable:!0,textAlign:"center",columns:2,children:[Object(I.jsxs)(w.a.Row,{children:[Object(I.jsx)(w.a.Column,{className:"logo",width:4,children:Object(I.jsx)("img",{src:ae,alt:"logo"})}),Object(I.jsx)(w.a.Column,{className:"topChart",width:12,children:Object(I.jsx)(te,{})})]}),Object(I.jsxs)(w.a.Row,{children:[Object(I.jsx)(w.a.Column,{className:"queues",width:4,children:Object(I.jsx)(_,{})}),Object(I.jsx)(w.a.Column,{className:"workzone",width:12,children:Object(I.jsx)(G,{styleType:"dash"})})]})]})})},re=a(734),se=a(677),ie=a(735),ce=a(200),le=a(736),oe=a(27),ue=a.n(oe),de={getAll:function(){return A.get("/collections")},getCollection:function(e){return je.apply(this,arguments)}};function je(){return(je=Object(P.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.get("/collections/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var be=a(268),me=a.n(be),Ae=a(742),he=function(e){var t=e.categoryContent,a=e.resultsContent;return Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"name",children:t}),Object(I.jsx)("div",{className:"results",children:a})]})},fe=function(e){var t=e.name;return Object(I.jsx)(K.a,{className:"categoryRenderer",as:"span",content:t})},pe=function(e){var t=e.customername,a=e.casenumber;return Object(I.jsx)(K.a,{as:X.a,to:"/collection/".concat(a),className:"resultRenderer",content:t})},Oe={isLoading:!1,value:"",results:[],source:null,records:null},ge=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state=Oe,e.handleResultSelect=function(t,a){var n=a.result;return e.setState({value:n.customername})},e.handleSearchChange=function(t,a){var n=a.value;e.setState({isLoading:!0,value:n}),setTimeout(Object(P.a)(S.a.mark((function t(){var a,n,r,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.value.length<1&&(e.setState({isLoading:!1,value:"",results:[],source:null}),e.loadRecords(),e.setSource()),a=[],e.state.records.forEach((function(e){a.push({title:e.customerRefNo,customername:e.customerName})})),n=new RegExp(me.a.escapeRegExp(e.state.value),"i"),r=function(e){return n.test(e.customername)},s=me.a.reduce(e.state.source,(function(e,t,a){var n=me.a.filter(t.results,r);return n.length&&(e[a]={name:a,results:n}),e}),{}),e.setState({isLoading:!1,results:s});case 7:case"end":return t.stop()}}),t)}))),300)},e}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=Object(P.a)(S.a.mark((function e(){var t=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.records?this.setState({records:this.props.records},(function(){t.setSource()})):this.loadRecords();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadRecords",value:function(){var e=Object(P.a)(S.a.mark((function e(){var t=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,de.getAll();case 3:e.t1=e.sent,e.t2={records:e.t1},e.t3=function(){t.setSource()},e.t0.setState.call(e.t0,e.t2,e.t3);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSource",value:function(){this.setState({source:{global:{name:"global",results:this.getGlobalResults()},agent:{name:"agent",results:this.getAgentResults()}}})}},{key:"getGlobalResults",value:function(){var e=this,t=this.state.records;if(t)return t.map((function(t){return e.recordsFields(t)}))}},{key:"getAgentResults",value:function(){var e=this,t=this.state.records,a=d.userValue,n=[];if(t)return t.forEach((function(e){e.currentAssignment===a.email&&n.push(e)})),n.map((function(t){return e.recordsFields(t)}))}},{key:"recordsFields",value:function(e){return{title:e.customerRefNo,customername:e.customerName,regidnumber:e.regIdNumber,amountdue:e.amountDue,accountnumber:e.accountNumber,creditlimit:e.creditLimit,currentbalance:e.currentBalance,debtorage:e.debtorAge,totalbalance:e.totalBalance,casenotes:e.caseNotes,casenumber:e.caseNumber,currentassignment:e.currentAssignment,currentstatus:e.currentStatus,nextvisitdatetime:e.nextVisitDateTime,resolution:e.resolution,updatedat:e.updatedAt,updatedby:e.updatedBy}}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.value,n=e.results;return Object(I.jsx)(w.a,{children:Object(I.jsx)(w.a.Column,{width:8,children:Object(I.jsx)(Ae.a,{category:!0,categoryLayoutRenderer:he,categoryRenderer:fe,loading:t,onResultSelect:this.handleResultSelect,onSearchChange:me.a.debounce(this.handleSearchChange,500,{leading:!0}),resultRenderer:pe,results:n,value:a})})})}}]),a}(r.Component),xe=function(e){Object(r.useEffect)((function(){window.scrollTo(0,0)}),[]);var t,a=Object(r.useState)(null),n=Object(D.a)(a,2),s=n[0],i=n[1],c=Object(r.useState)("Open"),l=Object(D.a)(c,2),o=l[0],u=l[1],d=Object(r.useState)("idle"),j=Object(D.a)(d,2),b=j[0],m=j[1],A=void 0!==e.location.state?e.location.state.caseStatus:"Open",h=Object(r.useCallback)(function(){var e=Object(P.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.getAll();case 2:a=e.sent,i(a),u(t),m("succeeded");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(r.useEffect)((function(){"idle"===b&&(u(A),h(A))}),[A,b,h]),t=s?s.map((function(e){if(e.currentStatus===o){var t="/collection/".concat(e.caseNumber);return Object(I.jsxs)(re.a.Row,{className:"collections row",children:[Object(I.jsx)(re.a.Cell,{children:Object(I.jsx)(ce.a,{as:X.a,to:t,style:{padding:"10px"},children:"Open"})}),Object(I.jsx)(re.a.Cell,{children:e.accountNumber}),Object(I.jsx)(re.a.Cell,{children:e.customerName}),Object(I.jsx)(re.a.Cell,{children:e.regIdNumber}),Object(I.jsx)(re.a.Cell,{textAlign:"right",children:e.debtorAge}),Object(I.jsx)(re.a.Cell,{children:e.caseNotes}),Object(I.jsxs)(re.a.Cell,{textAlign:"right",children:["R ",e.totalBalance]}),Object(I.jsxs)(re.a.Cell,{textAlign:"right",children:["R ",e.amountDue]}),Object(I.jsxs)(re.a.Cell,{textAlign:"right",children:["R ",e.currentBalance]}),Object(I.jsx)(re.a.Cell,{children:e.resolution}),Object(I.jsx)(re.a.Cell,{children:e.nextVisitDateTime?ue()(e.nextVisitDateTime).format("YYYY-MM-DD HH:mm"):""}),Object(I.jsx)(re.a.Cell,{children:e.currentAssignment}),Object(I.jsx)(re.a.Cell,{children:e.updatedBy}),Object(I.jsx)(re.a.Cell,{children:ue()(e.updatedAt).format("YYYY-MM-DD HH:mm")})]},e.caseNumber)}return null})):Object(I.jsx)(re.a.Row,{children:Object(I.jsx)(re.a.Cell,{children:Object(I.jsx)(se.a,{active:!0,children:Object(I.jsx)(ie.a,{children:"Loading..."})})})});return Object(I.jsxs)(C.a,{className:"collections",fluid:!0,children:[function(){switch(o){case"Closed":return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(le.a,{className:"collections",as:"h2",floated:"left",children:["Collections: ",o," ",Object(I.jsx)(ce.a,{onClick:function(){return h("Open")},children:"Load Open"})]}),Object(I.jsx)(le.a,{className:"collections",floated:"right",children:Object(I.jsx)(ge,{records:s})})]});case"Open":return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(le.a,{className:"collections",as:"h2",floated:"left",children:["Collections: ",o," ",Object(I.jsx)(ce.a,{onClick:function(){return h("Closed")},children:"Load Closed"})]}),Object(I.jsx)(le.a,{className:"collections",floated:"right",children:Object(I.jsx)(ge,{records:s})})]});default:return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(le.a,{className:"collections",as:"h2",floated:"left",children:["Collections: ",o," Status not found"," ",Object(I.jsx)(ce.a,{onClick:function(){return h("Closed")},children:"Load Closed"}),Object(I.jsx)(ce.a,{onClick:function(){return h("Open")},children:"Load Open"})]}),Object(I.jsx)(le.a,{className:"collections",floated:"right",children:Object(I.jsx)(ge,{records:s})})]})}}(),Object(I.jsxs)(re.a,{className:"collections",celled:!0,compact:!0,fixed:!0,selectable:!0,size:"small",unstackable:!0,children:[Object(I.jsx)(re.a.Header,{className:"collections",children:Object(I.jsxs)(re.a.Row,{children:[Object(I.jsx)(re.a.HeaderCell,{children:"Case Number"}),Object(I.jsx)(re.a.HeaderCell,{children:"Account Number"}),Object(I.jsx)(re.a.HeaderCell,{children:"Customer Name"}),Object(I.jsx)(re.a.HeaderCell,{children:"Registration / ID Number"}),Object(I.jsx)(re.a.HeaderCell,{children:"Debtor Age"}),Object(I.jsx)(re.a.HeaderCell,{children:"Case Notes"}),Object(I.jsx)(re.a.HeaderCell,{children:"Total Balance"}),Object(I.jsx)(re.a.HeaderCell,{children:"Amount Due"}),Object(I.jsx)(re.a.HeaderCell,{children:"Current Balance"}),Object(I.jsx)(re.a.HeaderCell,{children:"Resolution"}),Object(I.jsx)(re.a.HeaderCell,{children:"Next Visit Date and Time"}),Object(I.jsx)(re.a.HeaderCell,{children:"Current Assignment"}),Object(I.jsx)(re.a.HeaderCell,{children:"Updated By"}),Object(I.jsx)(re.a.HeaderCell,{children:"Updated Date"})]})}),Object(I.jsx)(re.a.Body,{className:"collections",children:t})]})]})},Ce=a(737),ve=a(301),Ie=a(740),ye=a(679),Ne={getAll:function(){return A.get("/cases")},getCase:function(e){return A.get("/cases/".concat(e))},updateCase:function(e,t){return A.put("/cases/".concat(e),t)}};var we=a(18),De=a(438),ke={getAll:function(){return A.get("/contacts")},getContact:function(e){return A.get("/contacts/".concat(e))},updateContact:function(e,t){return A.put("/contacts/".concat(e),t)}};var Se=function(e){var t=e.id,a=e.user,n=Object(r.useState)(1),s=Object(D.a)(n,2),i=s[0],c=s[1],o=Object(r.useState)(null),u=Object(D.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)("idle"),m=Object(D.a)(b,2),A=m[0],h=m[1],f=Object(r.useState)(d),p=Object(D.a)(f,2),O=p[0],g=p[1];Object(r.useEffect)((function(){function e(){return(e=Object(P.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("loading"),e.t0=j,e.next=4,ke.getContact(t);case 4:e.t1=e.sent,(0,e.t0)(e.t1),h("succeeded");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);var x,C=function(e){var t=e.target.value;g(Object(l.a)(Object(l.a)({},O),{},Object(we.a)({},e.target.name,t)))};return d?"error"===A?x=Object(I.jsx)("div",{children:"error"}):"succeeded"===A&&d&&(x=Object(I.jsxs)(De.a,{children:[Object(I.jsx)(De.a.Title,{active:0===i,index:0,onClick:function(e,t){var a=t.index;c(i===a?-1:a)},children:Object(I.jsx)(ce.a,{children:"Click for more contact details"})}),Object(I.jsx)(De.a.Content,{active:0===i,children:Object(I.jsx)(ve.a,{raised:!0,centered:!0,fluid:!0,children:Object(I.jsxs)(Ce.a,{children:[Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].primaryContactName||"",fluid:!0,id:"form-input-control-primary-contact-name",name:"primaryContactName",label:"Primary Contact Name",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].primaryContactNumber||"",fluid:!0,id:"form-input-control-primary-contact-number",name:"primaryContactNumber",label:"Primary Contact Number",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].primaryContactEmail||"",fluid:!0,id:"form-input-control-primary-contact-email",name:"primaryContactEmail",label:"Primary Contact Email",onChange:C,type:"text"})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].representativeName||"",fluid:!0,id:"form-input-control-representative-name",name:"representativeName",label:"Representative Name",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].representativeNumber||"",fluid:!0,id:"form-input-control-representative-number",name:"representativeNumber",label:"Representative Number",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].representativeEmail||"",fluid:!0,id:"form-input-control-representative-email",name:"representativeEmail",label:"Representative Email",onChange:C,type:"text"})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].alternativeRepName||"",fluid:!0,id:"form-input-control-alternative-rep-name",name:"alternativeRepName",label:"Alternative Representative Name",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].alternativeRepNumber||"",fluid:!0,id:"form-input-control-alternative-rep-number",name:"alternativeRepNumber",label:"Alternative Representative Number",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].alternativeRepEmail||"",fluid:!0,id:"form-input-control-representative-email",name:"alternativeRepEmail",label:"Alternative Representative Email",onChange:C,type:"text"})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherNumber1||"",fluid:!0,id:"form-input-control-other-number-1",name:"otherNumber1",label:"Other Number 1",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherNumber2||"",fluid:!0,id:"form-input-control-other-number-2",name:"otherNumber2",label:"Other Number 2",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherNumber3||"",fluid:!0,id:"form-input-control-other-number-3",name:"otherNumber3",label:"Other Number 3",onChange:C,type:"text"})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherNumber4||"",fluid:!0,id:"form-input-control-other-number-4",name:"otherNumber4",label:"Other Number 4",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherNumber5||"",fluid:!0,id:"form-input-control-other-number-5",name:"otherNumber5",label:"Other Number 5",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherNumber6||"",fluid:!0,id:"form-input-control-other-number-6",name:"otherNumber6",label:"Other Number 6",onChange:C,type:"text"})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherNumber7||"",fluid:!0,id:"form-input-control-other-number-7",name:"otherNumber7",label:"Other Number 7",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherNumber8||"",fluid:!0,id:"form-input-control-other-number-8",name:"otherNumber8",label:"Other Number 8",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherNumber9||"",fluid:!0,id:"form-input-control-other-number-9",name:"otherNumber9",label:"Other Number 9",onChange:C,type:"text"})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherNumber10||"",fluid:!0,id:"form-input-control-other-number-10",name:"otherNumber10",label:"Other Number 10",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Field,{}),Object(I.jsx)(Ce.a.Field,{})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherEmail1||"",fluid:!0,id:"form-input-control-other-email-1",name:"otherEmail1",label:"Other Email 1",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherEmail2||"",fluid:!0,id:"form-input-control-other-email-2",name:"otherEmail2",label:"Other Email 2",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherEmail3||"",fluid:!0,id:"form-input-control-other-email-3",name:"otherEmail3",label:"Other Email 3",onChange:C,type:"text"})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherEmail4||"",fluid:!0,id:"form-input-control-other-email-4",name:"otherEmail4",label:"Other Email 4",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherEmail5||"",fluid:!0,id:"form-input-control-other-email-5",name:"otherEmail5",label:"Other Email 5",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherEmail6||"",fluid:!0,id:"form-input-control-other-email-6",name:"otherEmail6",label:"Other Email 6",onChange:C,type:"text"})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherEmail7||"",fluid:!0,id:"form-input-control-other-email-7",name:"otherEmail7",label:"Other Email 7",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherEmail8||"",fluid:!0,id:"form-input-control-other-email-8",name:"otherEmail8",label:"Other Email 8",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherEmail9||"",fluid:!0,id:"form-input-control-other-email-9",name:"otherEmail9",label:"Other Email 9",onChange:C,type:"text"})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].otherEmail10||"",fluid:!0,id:"form-input-control-other-email-10",name:"otherEmail10",label:"Other Email 10",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Field,{}),Object(I.jsx)(Ce.a.Field,{})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].dnc1||"",fluid:!0,id:"form-input-control-dnc-1",name:"dnc1",label:"Do not contact 1",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].dnc2||"",fluid:!0,id:"form-input-control-dnc-2",name:"dnc2",label:"Do not contact 2",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].dnc3||"",fluid:!0,id:"form-input-control-dnc-3",name:"dnc3",label:"Do not contact 3",onChange:C,type:"text"})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].dnc4||"",fluid:!0,id:"form-input-control-dnc-4",name:"dnc4",label:"Do not contact 4",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Input,{defaultValue:d[0].dnc5||"",fluid:!0,id:"form-input-control-dnc-5",name:"dnc5",label:"Do not contact 5",onChange:C,type:"text"}),Object(I.jsx)(Ce.a.Field,{})]}),Object(I.jsx)(ce.a,{onClick:function(){var e=O;e.id=t,e.updatedBy=a,ke.updateContact(t,e)},children:"Update Contacts"})]})})})]})):x=Object(I.jsx)("div",{className:"loading",children:"No contacts"}),Object(I.jsx)("div",{children:x})},Pe={getAll:function(){return A.get("/outcomes")},getOutcomesByCaseNumber:function(e){return A.get("/outcomes/".concat(e))},getOutcome:function(e){return A.get("/outcomes/".concat(e))},createOutcome:function(e){return console.log("createOutcome",e),A.post("/outcomes",e)},updateOutcome:function(e,t){return A.put("/outcomes/".concat(e),t)}};var Re=function(e){var t,a,n=e.id,s=Object(r.useState)(null),i=Object(D.a)(s,2),c=i[0],l=i[1],o=Object(r.useState)("idle"),u=Object(D.a)(o,2),d=u[0],j=u[1];if(Object(r.useEffect)((function(){function e(){return(e=Object(P.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,Pe.getOutcomesByCaseNumber(n);case 3:e.t1=e.sent,(0,e.t0)(e.t1),j("succeeded");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,d]),c){var b,m=[];c.forEach((function(e,t){m[t]="".concat(t+1,": ")+e.outcomeNotes+"\n\r"})),b=m.join("\n");var A=[];c.forEach((function(e,t){var a=e.ptpDate?ue()(e.ptpDate).format("YYYY-MM-DD"):"--",n=e.debitResubmissionDate?ue()(e.debitResubmissionDate).format("YYYY-MM-DD"):"--";A[t]=ue()(e.createdDate).format("YYYY-MM-DD HH:mm:ss")+" by user "+e.createdBy+"\nTransaction type: "+e.transactionType+"\nContacted person: "+e.contactPerson+"\nNumber called: "+e.numberCalled+"\nEmail used: "+e.emailUsed+"\nPTP date: "+a+"\nPTP amount: R"+e.ptpAmount+"\nPend reason: "+e.pendReason+"\nDebit order resubmission date: "+n+"\nDebit order resubmission amount: R"+e.debitResubmissionAmount+"\nOutcome resolution: "+e.outcomeResolution+"\nNext visit date and time: "+ue()(e.nextVisitDateTime).format("YYYY-MM-DD HH:mm")+"\nNext steps: "+e.nextSteps+"\nOutcome notes: \n"+b+"\n-----------------------------------------\n\r"})),t=A.join("\n")}return"succeeded"===d&&(a=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(ve.a.Header,{className:"collection-card-header",children:Object(I.jsx)(ve.a.Content,{children:"Outcomes History"})}),Object(I.jsx)(ve.a.Content,{children:Object(I.jsx)(Ce.a,{children:Object(I.jsx)(Ce.a.Group,{widths:"equal",children:Object(I.jsx)(Ce.a.TextArea,{id:"form-input-control-outcomesHistory",rows:"10",readOnly:!0,defaultValue:t})})})})]})),Object(I.jsx)("div",{children:a})},Te=a(681),Ee=a(682),Ve=a(167),Fe={getAll:function(){return A.get("/accounts")},getAccount:function(e){return A.get("/accounts/".concat(e))},updateAccount:function(e,t){return A.put("/accounts/".concat(e),t)}};var Me=function(e){var t,a=e.handleSelect,n=e.user,s=Object(r.useState)(null),i=Object(D.a)(s,2),c=i[0],l=i[1],o=Object(r.useState)("idle"),u=Object(D.a)(o,2),j=u[0],b=u[1];Object(r.useEffect)((function(){function e(){return(e=Object(P.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,d.getAll();case 3:e.t1=e.sent,(0,e.t0)(e.t1),b("succeeded");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[j]);var m=[];if(c){if("succeeded"===j){c.map((function(e){return m.push({key:e.id,text:e.firstName+" "+e.lastName,value:e.email})}));var A=n.firstName+" "+n.lastName;t=Object(I.jsx)(Ce.a.Select,{fluid:!0,id:"form-input-control-userlist",label:"Assignment",name:"currentAssignment",onChange:a,options:m,placeholder:A,required:!0})}}else t=Object(I.jsx)("div",{className:"loader",children:"Loading..."});return Object(I.jsx)(I.Fragment,{children:t})},ze=function(e){s.a.useEffect((function(){window.scrollTo(0,0)}),[]);var t=d.userValue,a=t.role,n=e.accountNumber,r=e.caseNotes,i=e.caseStatus,c=e.currentAssignment,o=e.currentStatus,u=e.id,j=e.kamNotes,b=[{key:"callback",text:"Customer requested a callback",value:"Customer requested a callback"},{key:"info",text:"Customer requested additional information",value:"Customer requested additional information"},{key:"payment",text:"Payment already made",value:"Payment already made"},{key:"ptp",text:"Customer made PTP",value:"Customer made PTP"},{key:"dispute",text:"Customer disputed account",value:"Customer disputed account"}],m=[{key:"a",text:"Admin",value:"Admin"},{key:"c",text:"Call",value:"Call"},{key:"e",text:"Email",value:"Email"}],A=function(e){var t=e.target.name,a=e.target.value;k((function(e){return{fields:Object(l.a)(Object(l.a)({},e.fields),{},{entities:Object(l.a)(Object(l.a)({},e.fields.entities),{},Object(we.a)({},t,Object(l.a)(Object(l.a)({},e.fields.entities[t]),{},{value:a})))})}}))},h=function(e,t){k((function(a){return{fields:Object(l.a)(Object(l.a)({},a.fields),{},{entities:Object(l.a)(Object(l.a)({},a.fields.entities),{},Object(we.a)({},t,Object(l.a)(Object(l.a)({},a.fields.entities[t]),{},{error:e})))})}}))},f=function(e,t){t.name;var a=t.value,n=a,r=ue()(a).subtract(1,"days").set({hour:8,minute:0}).format("YYYY-MM-DD HH:mm");k((function(e){return{fields:Object(l.a)(Object(l.a)({},e.fields),{},{entities:Object(l.a)(Object(l.a)({},e.fields.entities),{},{ptpDate:Object(l.a)(Object(l.a)({},e.fields.entities.ptpDate),{},{value:n})})})}})),k((function(e){return{fields:Object(l.a)(Object(l.a)({},e.fields),{},{entities:Object(l.a)(Object(l.a)({},e.fields.entities),{},{nextVisitDateTime:Object(l.a)(Object(l.a)({},e.fields.entities.nextVisitDateTime),{},{value:r})})})}}))},p=function(e,t){var a=t.name,n=t.value;k((function(e){return{fields:Object(l.a)(Object(l.a)({},e.fields),{},{entities:Object(l.a)(Object(l.a)({},e.fields.entities),{},Object(we.a)({},a,Object(l.a)(Object(l.a)({},e.fields.entities[a]),{},{value:n})))})}}))},O=function(e,t){var a=t.name,n=t.value;k((function(e){return{fields:Object(l.a)(Object(l.a)({},e.fields),{},{entities:Object(l.a)(Object(l.a)({},e.fields.entities),{},Object(we.a)({},a,Object(l.a)(Object(l.a)({},e.fields.entities[a]),{},{value:n})))})}}))},x=function(){w.fields.ids.forEach((function(e){k((function(t){return{fields:Object(l.a)(Object(l.a)({},t.fields),{},{entities:Object(l.a)(Object(l.a)({},t.fields.entities),{},Object(we.a)({},e,Object(l.a)(Object(l.a)({},t.fields.entities[e]),{},{error:null})))})}}))}))},v=function(){var e=!0;console.log("Current state: ",w.fields.entities),w.fields.entities.transactionType.value||(h("Please select a transaction type","transactionType"),e=!1),"Call"===w.fields.entities.transactionType.value&&10!==w.fields.entities.numberCalled.value.length&&(h("Please provide an 10 digit phone number","numberCalled"),e=!1);return"Email"!==w.fields.entities.transactionType.value||/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,20}$/.test(w.fields.entities.emailUsed.value)||(h("Please provide a valid email address","emailUsed"),e=!1),""===w.fields.entities.contactPerson.value&&(h("Please provide a valid contact person","contactPerson"),e=!1),""!==w.fields.entities.ptpDate.value&&""===w.fields.entities.ptpAmount.value&&(h("Please provide an amount","ptpAmount"),e=!1),""!==w.fields.entities.ptpAmount.value&&""===w.fields.entities.ptpDate.value&&(h("Please provide a date","ptpDate"),e=!1),""===w.fields.entities.resolution.value&&(h("Please select a resolution","resolution"),e=!1),""!==w.fields.entities.debitResubmissionDate.value&&""===w.fields.entities.debitResubmissionAmount.value&&(h("Please provide an amount","debitResubmissionAmount"),e=!1),""!==w.fields.entities.debitResubmissionAmount.value&&""===w.fields.entities.debitResubmissionDate.value&&(h("Please provide a date","debitResubmissionDate"),e=!1),"Admin"===a&&w.fields.entities.outcomeNotes.value.length<10&&(h("Please provide more detailed notes","outcomeNotes"),e=!1),"Agent"===a&&w.fields.entities.outcomeNotes.value.length<10&&(h("Please provide more detailed notes","outcomeNotes"),e=!1),"Kam"===a&&w.fields.entities.kamNotes.value.length<10&&(h("Please provide more detailed notes","kamNotes"),e=!1),""===w.fields.entities.nextVisitDateTime.value&&(h("Please provide a date","nextVisitDateTime"),e=!1),w.fields.entities.nextSteps.value.length<10&&(h("Please provide more detailed notes","nextSteps"),e=!1),e},y=s.a.useState({fields:{ids:["contactPerson","currentAssignment","debitResubmissionAmount","debitResubmissionDate","emailUsed","newCaseNotes","newKamNotes","nextSteps","nextVisitDateTime","numberCalled","outcomeNotes","pendReason","ptpAmount","ptpDate","regIdStatus","resolution","transactionType"],entities:{contactPerson:{control:ye.a,error:null,fluid:!0,isError:!1,label:"Contact Person",onChange:A,rules:[],type:"text",value:""},currentAssignment:{control:Te.a,error:null,fluid:!0,isError:!1,label:"Current Assignment",onChange:O,options:"",rules:[],type:"text",value:t},debitResubmissionAmount:{control:ye.a,error:null,fluid:!0,isError:!1,label:"Debit Resubmission Amount",onChange:A,rules:[],type:"text",value:""},debitResubmissionDate:{DateTimeInput:Ve.DateTimeInput,error:null,fluid:!1,isError:!1,label:"Debit Resubmission Date",onChange:p,rules:[],type:"text",value:""},emailUsed:{control:ye.a,error:null,fluid:!0,isError:!1,label:"Email Used",onChange:A,rules:[],type:"email",value:""},newCaseNotes:{control:Ee.a,error:null,isError:!1,label:"New Case Notes",onChange:A,rules:[],type:"text",value:""},newKamNotes:{control:Ee.a,error:null,isError:!1,label:"New KAM Notes",onChange:A,rules:[],type:"text",value:""},nextSteps:{control:Ee.a,error:null,isError:!1,label:"Next Steps",onChange:A,rules:[],type:"text",value:""},nextVisitDateTime:{DateTimeInput:Ve.DateTimeInput,error:null,fluid:!1,isError:!1,label:"Next Visit Date and Time",onChange:p,rules:[],type:"text",value:""},numberCalled:{control:ye.a,error:null,fluid:!0,isError:!1,label:"Number Called",onChange:A,rules:[],type:"text",value:""},outcomeNotes:{control:Ee.a,error:null,isError:!1,label:"Outcome Notes",onChange:A,rules:[],type:"text",value:""},pendReason:{control:Te.a,error:null,fluid:!1,isError:!1,label:"Pend Reason",onChange:O,options:[{key:"1",text:"Pend Reason 1",value:"1"},{key:"2",text:"Pend Reason 2",value:"2"},{key:"3",text:"Pend Reason 3",value:"3"}],rules:[],type:"text",value:""},ptpAmount:{control:ye.a,error:null,fluid:!0,isError:!1,label:"PTP Amount",onChange:A,rules:[],type:"text",value:""},ptpDate:{DateTimeInput:Ve.DateTimeInput,error:null,fluid:!1,isError:!1,label:"PTP Date",onChange:f,rules:[],type:"text",value:""},regIdStatus:{control:Te.a,error:null,fluid:!1,isError:!1,label:"Registration / ID Status",onChange:O,rules:[],type:"text",value:""},resolution:{control:Te.a,error:null,fluid:!1,isError:!1,label:"Resolution",onChange:O,options:b,rules:[],type:"text",value:""},transactionType:{control:Te.a,error:null,fluid:!1,isError:!1,label:"Transaction Type",onChange:O,options:m,rules:[],type:"text",value:""}}}}),N=Object(D.a)(y,2),w=N[0],k=N[1],R=function(){var e=Object(P.a)(S.a.mark((function e(a){var s,i,l,o,d,b,m,A,h;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null,i=null,null,""!==w.fields.entities.newKamNotes.value&&(i="".concat(ue()(new Date).format("YYYY-MM-DD HH:mm:ss")," by ").concat(t.email,"\n").concat(w.fields.entities.newKamNotes.value,"\n\r")+j,""===w.fields.entities.newCaseNotes.value&&(w.fields.entities.newCaseNotes.value="KAM notes updated")),""!==w.fields.entities.newCaseNotes.value&&(s="".concat(ue()(new Date).format("YYYY-MM-DD HH:mm:ss")," by ").concat(t.email,"\n").concat(w.fields.entities.newCaseNotes.value,"\n\r")+r),l="".concat(ue()(new Date).format("YYYY-MM-DD HH:mm:ss")," by ").concat(t.email,"\n").concat(w.fields.entities.outcomeNotes.value,"\n\r"),o=ue()(new Date).format("YYYY-MM-DD HH:mm:ss"),d=t.email,console.log("newKamNote: ",i),"Closed"===a&&i&&s?(console.log("1 "),b={currentAssignment:null,currentStatus:a,caseNotes:s,kamNotes:i,nextVisitDateTime:null,resolution:w.fields.entities.resolution.value,updatedBy:t.email}):"Closed"===a&&i&&!s?(console.log("2"),b={currentAssignment:null,currentStatus:a,kamNotes:i,nextVisitDateTime:null,resolution:w.fields.entities.resolution.value,updatedBy:t.email}):"Closed"===a&&!i&&s?(console.log("3"),b={currentAssignment:null,currentStatus:a,caseNotes:s,nextVisitDateTime:null,resolution:w.fields.entities.resolution.value,updatedBy:t.email}):"Closed"!==a||i||s?"Closed"!==a&&""!==i&&""!==s?b={currentAssignment:c,currentStatus:a,caseNotes:s,kamNotes:i,nextVisitDateTime:w.fields.entities.nextVisitDateTime.value,resolution:w.fields.entities.resolution.value,updatedBy:t.email}:"Closed"!==a&&""!==i&&""===s?b={currentAssignment:c,currentStatus:a,kamNotes:i,nextVisitDateTime:w.fields.entities.nextVisitDateTime.value,resolution:w.fields.entities.resolution.value,updatedBy:t.email}:"Closed"!==a&&""===i&&""!==s?b={currentAssignment:c,currentStatus:a,caseNotes:s,nextVisitDateTime:w.fields.entities.nextVisitDateTime.value,resolution:w.fields.entities.resolution.value,updatedBy:t.email}:"Closed"!==a&&""===i&&""===s&&(b={currentAssignment:c,currentStatus:a,nextVisitDateTime:w.fields.entities.nextVisitDateTime.value,resolution:w.fields.entities.resolution.value,updatedBy:t.email}):(console.log("4"),b={currentAssignment:null,currentStatus:a,nextVisitDateTime:null,resolution:w.fields.entities.resolution.value,updatedBy:t.email}),w.fields.entities.ptpDate.value||w.fields.entities.debitResubmissionDate.value?w.fields.entities.ptpDate.value&&!w.fields.entities.debitResubmissionDate.value?(A={lastPTPDate:w.fields.entities.ptpDate.value,lastPTPAmount:w.fields.entities.ptpAmount.value,updatedBy:t.email},m={createdBy:t.email,outcomeStatus:"Closed",transactionType:w.fields.entities.transactionType.value,numberCalled:w.fields.entities.numberCalled.value,emailUsed:w.fields.entities.emailUsed.value,contactPerson:w.fields.entities.contactPerson.value,outcomeResolution:w.fields.entities.resolution.value,outcomeNotes:l,ptpDate:w.fields.entities.ptpDate.value,ptpAmount:w.fields.entities.ptpAmount.value,nextSteps:w.fields.entities.nextSteps.value,closedDate:o,closedBy:d,f_caseNumber:u}):!w.fields.entities.ptpDate.value&&w.fields.entities.debitResubmissionDate.value?(A={updatedBy:t.email},m={createdBy:t.email,outcomeStatus:"Closed",transactionType:w.fields.entities.transactionType.value,numberCalled:w.fields.entities.numberCalled.value,emailUsed:w.fields.entities.emailUsed.value,contactPerson:w.fields.entities.contactPerson.value,outcomeResolution:w.fields.entities.resolution.value,outcomeNotes:l,nextSteps:w.fields.entities.nextSteps.value,closedDate:o,closedBy:d,debitResubmissionAmount:w.fields.entities.debitResubmissionAmount.value,debitResubmissionDate:w.fields.entities.debitResubmissionDate.value,f_caseNumber:u}):w.fields.entities.ptpDate.value&&w.fields.entities.debitResubmissionDate.value&&(A={lastPTPDate:w.fields.entities.ptpDate.value,lastPTPAmount:w.fields.entities.ptpAmount.value,updatedBy:t.email},m={createdBy:t.email,outcomeStatus:"Closed",transactionType:w.fields.entities.transactionType.value,numberCalled:w.fields.entities.numberCalled.value,emailUsed:w.fields.entities.emailUsed.value,contactPerson:w.fields.entities.contactPerson.value,outcomeResolution:w.fields.entities.resolution.value,outcomeNotes:l,ptpDate:w.fields.entities.ptpDate.value,ptpAmount:w.fields.entities.ptpAmount.value,nextSteps:w.fields.entities.nextSteps.value,closedDate:o,closedBy:d,debitResubmissionAmount:w.fields.entities.debitResubmissionAmount.value,debitResubmissionDate:w.fields.entities.debitResubmissionDate.value,f_caseNumber:u}):(A={updatedBy:t.email},m={createdBy:t.email,outcomeStatus:"Closed",transactionType:w.fields.entities.transactionType.value,numberCalled:w.fields.entities.numberCalled.value,emailUsed:w.fields.entities.emailUsed.value,contactPerson:w.fields.entities.contactPerson.value,outcomeResolution:w.fields.entities.resolution.value,outcomeNotes:l,nextSteps:w.fields.entities.nextSteps.value,closedDate:o,closedBy:d,f_caseNumber:u}),e.next=13,Fe.updateAccount(n,A);case 13:return console.log("case update: ",b),e.next=16,Ne.updateCase(u,b);case 16:return e.next=18,Pe.createOutcome(m);case 18:"Ok"===(h=e.sent).status?g.push({pathname:"/collections",state:{caseStatus:h.outcomeStatus}}):console.log(h);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=new Date;return Object(I.jsx)(C.a,{children:Object(I.jsx)(ve.a,{raised:!0,centered:!0,fluid:!0,children:Object(I.jsxs)(Ce.a,{children:["Kam"===a&&Object(I.jsx)(Ce.a.Group,{widths:"equal",children:Object(I.jsx)(Ce.a.TextArea,{error:w.fields.entities.newKamNotes.error,id:"form-input-control-newKamNotes",name:"newKamNotes",label:"New KAM Note",onChange:A,type:"text",value:w.fields.entities.newKamNotes.value})}),Object(I.jsx)(Ce.a.Group,{widths:"equal",children:Object(I.jsx)(Ce.a.TextArea,{error:w.fields.entities.newCaseNotes.error,id:"form-input-control-newCaseNotes",name:"newCaseNotes",label:"New Case Note",onChange:A,type:"text",value:w.fields.entities.newCaseNotes.value})}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Field,{control:Te.a,error:w.fields.entities.transactionType.error,fluid:!0,id:"form-input-control-transaction-type-select",label:"Transaction Type",name:"transactionType",onChange:O,options:m,required:!0,value:w.fields.entities.transactionType.value}),Object(I.jsx)(Ce.a.Input,{fluid:!0,error:w.fields.entities.numberCalled.error,id:"form-input-control-numberCalled",name:"numberCalled",label:"Number Called",onChange:A,type:"text",value:w.fields.entities.numberCalled.value}),Object(I.jsx)(Ce.a.Input,{fluid:!0,error:w.fields.entities.emailUsed.error,label:"Email Used",id:"form-input-control-emailUsed",name:"emailUsed",onChange:A,type:"email",value:w.fields.entities.emailUsed.value})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{error:w.fields.entities.contactPerson.error,fluid:!0,label:"Contact Person",name:"contactPerson",onChange:A,id:"form-input-control-contactPerson",required:!0,type:"text",value:w.fields.entities.contactPerson.value}),Object(I.jsx)(Ce.a.Select,{error:w.fields.entities.resolution.error,fluid:!0,id:"form-input-control-resolution",label:"Outcome Resolution",name:"resolution",onChange:O,options:b,required:!0})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{error:w.fields.entities.ptpDate.error,input:Object(I.jsx)(Ve.DateTimeInput,{closable:!0,dateTimeFormat:"YYYY-MM-DD HH:mm:ss",minDate:T,name:"ptpDate",placeholder:"PTP Date",value:w.fields.entities.ptpDate.value,iconPosition:"left",onChange:f}),label:"PTP Date",name:"ptpDate"}),Object(I.jsx)(Ce.a.Input,{error:w.fields.entities.ptpAmount.error,fluid:!0,label:"PTP Amount",name:"ptpAmount",onChange:A,id:"form-input-control-ptpAmount",type:"number",value:w.fields.entities.ptpAmount.value})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{error:w.fields.entities.debitResubmissionDate.error,input:Object(I.jsx)(Ve.DateTimeInput,{closable:!0,dateTimeFormat:"YYYY-MM-DD HH:mm:ss",minDate:T,name:"debitResubmissionDate",placeholder:"Debit Resubmission Date",value:w.fields.entities.debitResubmissionDate.value,iconPosition:"left",onChange:p}),label:"Debit Resubmission Date",name:"debitResubmissionDate"}),Object(I.jsx)(Ce.a.Input,{error:w.fields.entities.debitResubmissionAmount.error,fluid:!0,label:"Debit Resubmission Amount",name:"debitResubmissionAmount",id:"form-input-control-debitResubmissionAmount",onChange:A,type:"number",value:w.fields.entities.debitResubmissionAmount.value})]}),Object(I.jsx)(Ce.a.Group,{widths:"equal",children:Object(I.jsx)(Ce.a.TextArea,{error:w.fields.entities.outcomeNotes.error,label:"Outcome Notes",name:"outcomeNotes",id:"form-input-control-outcomeNotes",onChange:A,value:w.fields.entities.outcomeNotes.value,required:!0})}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{error:w.fields.entities.nextVisitDateTime.error,input:Object(I.jsx)(Ve.DateTimeInput,{closable:!0,dateTimeFormat:"YYYY-MM-DD HH:mm:ss",minDate:T,name:"nextVisitDateTime",placeholder:"Next Visit Date and Time",value:w.fields.entities.nextVisitDateTime.value,iconPosition:"left",onChange:p}),label:"Next Visit Date and Time",required:!0}),Object(I.jsx)(Me,{handleSelect:O,user:t})]}),Object(I.jsx)(Ce.a.Group,{widths:"equal",children:Object(I.jsx)(Ce.a.TextArea,{error:w.fields.entities.nextSteps.error,label:"Next Steps",name:"nextSteps",id:"form-input-control-nextSteps",onChange:A,value:w.fields.entities.nextSteps.value,required:!0})}),Object(I.jsx)(Ce.a.Group,{widths:"equal"}),Object(I.jsx)(C.a,{fluid:!0,textAlign:"center",children:Object(I.jsxs)(ce.a.Group,{size:"large",children:[Object(I.jsx)(ce.a,{content:"Submit",onClick:function(e){e.preventDefault(),x(),v()&&R("Open")}}),Object(I.jsx)(ce.a.Or,{}),Object(I.jsx)(ce.a,{content:"Cancel",onClick:function(e){e.preventDefault(),x();var t={currentStatus:"Locked"===o?"Open":o,lockedDateTime:null};Ne.updateCase(u,t),g.push({pathname:"/collections",state:{caseStatus:i}})}}),Object(I.jsx)(ce.a.Or,{}),Object(I.jsx)(ce.a,{content:"Close",onClick:function(e){e.preventDefault(),x(),v()&&R("Closed")}})]})})]})})})},Le=function(e){Object(r.useEffect)((function(){window.scrollTo(0,0)}),[]);var t,a=e.match.params.id,n=d.userValue,s=Object(r.useState)(null),i=Object(D.a)(s,2),c=i[0],l=i[1],o=Object(r.useState)("idle"),u=Object(D.a)(o,2),j=u[0],b=u[1];if(Object(r.useEffect)((function(){var e=function(){var e=Object(P.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ue()(new Date).format("YYYY-MM-DD HH:mm:ss"),n={currentStatus:"Locked",lockedDateTime:t},e.next=4,Ne.updateCase(a,n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();"idle"===j&&(function(){var e=Object(P.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b("loading"),e.t0=l,e.next=4,de.getCollection(a);case 4:e.t1=e.sent,(0,e.t0)(e.t1),b("succeeded");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),e())}),[j,a]),"loading"===j)t=Object(I.jsx)(C.a,{children:Object(I.jsx)(se.a,{active:!0,children:Object(I.jsx)(ie.a,{children:"Loading..."})})});else if("error"===j)t=Object(I.jsx)(C.a,{children:"error"});else if("succeeded"===j){c.lastPaymentDate?c.lastPaymentDate=ue()(c.lastPaymentDate).format("YYYY-MM-DD"):c.lastPaymentDate="",c.lastPTPDate?c.lastPTPDate=ue()(c.lastPTPDate).format("YYYY-MM-DD"):c.lastPTPDate="",c.nextVisitDateTime?c.nextVisitDateTime=ue()(c.nextVisitDateTime).format("YYYY-MM-DD HH:mm"):c.nextVisitDateTime="";var m=function(e){return 0!==e&&e?"R "+e.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 "):"R 0.00"};t=Object(I.jsxs)(C.a,{children:[Object(I.jsxs)(ve.a,{raised:!0,centered:!0,fluid:!0,children:[Object(I.jsx)(ve.a.Header,{className:"collection-card-header",children:Object(I.jsxs)(ve.a.Content,{children:["Case Number ",c.caseNumber]})}),Object(I.jsxs)(ve.a.Content,{children:[Object(I.jsxs)(Ce.a,{children:[Object(I.jsx)(Ce.a.Group,{widths:"equal",children:Object(I.jsx)(Ce.a.TextArea,{label:"Account Number ".concat(c.accountNumber," - Notes"),id:"form-input-control-accountNumber",readOnly:!0,rows:"3",defaultValue:c.accountNotes})}),Object(I.jsx)(Ce.a.Group,{widths:"equal",children:Object(I.jsx)(Ce.a.TextArea,{label:"Case Notes",id:"form-input-control-caseNotes",readOnly:!0,rows:"3",defaultValue:c.caseNotes})}),Object(I.jsx)(Ce.a.Group,{widths:"equal",children:Object(I.jsx)(Ce.a.TextArea,{label:"KAM Notes",id:"form-input-control-kamNotes",readOnly:!0,rows:"3",defaultValue:c.kamNotes})}),Object(I.jsx)(Ce.a.Group,{widths:"equal",children:Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Customer Name",id:"form-input-control-customerName",readOnly:!0,defaultValue:c.customerName})}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:["Enterprise"===c.customerEntity?Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Registration Number",id:"form-input-control-regIdNumber",readOnly:!0,width:"4",defaultValue:c.regIdNumber}):"Consumer"===c.customerEntity?Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"ID Number",id:"form-input-control-regIdNumber",readOnly:!0,width:"4",defaultValue:c.regIdNumber}):Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"ID Number",id:"form-input-control-regIdNumber",readOnly:!0,width:"4",defaultValue:"No entity found"}),"Enterprise"===c.customerEntity?Object(I.jsx)(Ce.a.Input,{defaultValue:c.regIdStatus,id:"form-input-control-regIdStatus",label:"CIPC Status",name:"regIdStatus",readOnly:!0,width:"4"}):"Consumer"===c.customerEntity?Object(I.jsx)(Ce.a.Input,{defaultValue:c.regIdStatus,id:"form-input-control-regIdStatus",label:"IDV Status",name:"regIdStatus",readOnly:!0,width:"4"}):void 0]}),Object(I.jsx)("br",{}),Object(I.jsx)(Ie.a,{horizontal:!0,children:"Account Information"}),Object(I.jsx)("br",{}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Debtor Age",id:"form-input-control-debtorAge",readOnly:!0,defaultValue:c.debtorAge||""}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Credit Limit",id:"form-input-control-creditLimit",readOnly:!0,defaultValue:m(c.creditLimit)||""}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Total Balance",id:"form-input-control-totalBalance",readOnly:!0,defaultValue:m(c.totalBalance)||""})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Amount Due",id:"form-input-control-amountDue",readOnly:!0,defaultValue:m(c.amountDue)||""}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Current Balance",id:"form-input-control-currentBalance",readOnly:!0,defaultValue:m(c.currentBalance)||""}),Object(I.jsx)(Ce.a.Input,{fluid:!0,id:"form-input-control-account-status",label:"Account Status",name:"accountStatus",readOnly:!0,value:c.accountStatus||""})]}),Object(I.jsx)("br",{}),Object(I.jsx)(Ie.a,{horizontal:!0,children:"Days on book"}),Object(I.jsx)("br",{}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"30 Days",id:"form-input-control-days30",readOnly:!0,defaultValue:m(c.days30)||""}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"60 Days",id:"form-input-control-days60",readOnly:!0,defaultValue:m(c.days60)||""}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"90 Days",id:"form-input-control-days90",readOnly:!0,defaultValue:m(c.days90)||""})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"120 Days",id:"form-input-control-days120",readOnly:!0,defaultValue:m(c.days120)||""}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"150 Days",id:"form-input-control-days150",readOnly:!0,defaultValue:m(c.days150)||""}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"180 Days",id:"form-input-control-days180",readOnly:!0,defaultValue:m(c.days180)||""}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"+180 Days",id:"form-input-control-days180Over",readOnly:!0,defaultValue:m(c.days180Over)||""})]}),Object(I.jsx)("br",{}),Object(I.jsx)(Ie.a,{horizontal:!0,children:"Payment Information"}),Object(I.jsx)("br",{}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Payment Due Date",id:"form-input-control-paymentDueDate",readOnly:!0,defaultValue:c.paymentDueDate}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Debit Order Date",id:"form-input-control-debitOrderDate",readOnly:!0,defaultValue:c.debitOrderDate})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Last Payment Date",id:"form-input-control-lastPaymentDate",readOnly:!0,defaultValue:c.lastPaymentDate}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Last Payment Amount",id:"form-input-control-lastPaymentAmount",readOnly:!0,defaultValue:m(c.lastPaymentAmount)})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Last PTP Date",id:"form-input-control-ptpDate",readOnly:!0,defaultValue:c.lastPTPDate}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Last PTP Amount",id:"form-input-control-ptpAmount",readOnly:!0,defaultValue:m(c.lastPTPAmount)})]}),Object(I.jsx)("br",{}),Object(I.jsx)(Ie.a,{horizontal:!0,children:"Follow-up Information"}),Object(I.jsx)("br",{}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Next Visit Date and Time",readOnly:!0,defaultValue:c.nextVisitDateTime}),Object(I.jsx)(Ce.a.Input,{fluid:!0,label:"Representative Name",id:"form-input-control-representativeName",readOnly:!0,defaultValue:c.representativeName}),Object(I.jsx)(Ce.a.Field,{control:ye.a,id:"form-input-control-representativeNumber",label:"Representative Number",readOnly:!0,defaultValue:c.representativeNumber,children:Object(I.jsx)("a",{href:"tel:".concat(c.representativeNumber),style:{background:"#ECF0F1",border:"1px solid #CED4DA",borderRadius:"0.25rem",color:"#7B8A8B",display:"block",fontSize:"0.9375rem",fontWeight:"400",height:"2.5rem",lineHeight:"1.5",margin:"0",padding:"0.375rem 0.75rem",textDecoration:"underline",width:"100%"},children:c.representativeNumber})})]}),Object(I.jsx)(Ce.a.Group,{widths:"equal"})]}),Object(I.jsx)(Se,{id:c.accountNumber,user:n.email})]})]}),Object(I.jsx)("br",{}),Object(I.jsx)(ve.a,{raised:!0,centered:!0,fluid:!0,children:Object(I.jsx)(Re,{id:a})}),Object(I.jsx)("br",{}),Object(I.jsx)(ze,{accountNumber:c.accountNumber,caseNotes:c.caseNotes,caseStatus:c.currentStatus,currentAssignment:c.currentAssignment,currentStatus:c.currentStatus,id:a,kamNotes:c.kamNotes,outcomeNotes:""})]})}return Object(I.jsx)(C.a,{children:t})},Be=a(739),He=a(63),Ue={getAll:function(){return A.get("/customers")},getAllInvoices:function(){return A.get("/customers/invoices")},getById:function(e){return A.get("/customers/".concat(e))},create:function(e){return A.post("/customers",e)},update:function(e,t){return A.put("/customers/".concat(e),t).then((function(e){return e}))},delete:function(e){return A.delete("/customers/".concat(e)).then((function(e){return e}))}};var Ye=function(){var e=Object(r.useState)(null),t=Object(D.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)("idle"),i=Object(D.a)(s,2),c=i[0],l=i[1];Object(r.useEffect)((function(){function e(){return(e=Object(P.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l("loading"),e.t0=n,e.next=4,Ue.getAllInvoices();case 4:e.t1=e.sent,(0,e.t0)(e.t1),l("succeeded");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.scrollTo(0,0),function(){e.apply(this,arguments)}()}),[]);var o;return"loading"===c?o=Object(I.jsx)(re.a.Row,{children:Object(I.jsx)(re.a.Cell,{children:Object(I.jsx)(se.a,{active:!0,inverted:!0,children:Object(I.jsx)(ie.a,{inverted:!0,content:"Loading"})})})}):"error"===c?o=Object(I.jsx)(Be.a,{children:"error"}):"succeeded"===c&&(o=a.map((function(e){var t,a,n=e.customerRefNo,r=e.customerName,s=e.hasViewed,i=e.viewed,c=e.totalBalance;return s&&(t=!0),Object(I.jsxs)(re.a.Row,{positive:t,children:[Object(I.jsx)(re.a.Cell,{collapsing:!0,children:Object(I.jsxs)(ce.a,{animated:!0,as:X.a,to:"/customers/".concat(n),children:[Object(I.jsx)(ce.a.Content,{visible:!0,children:Object(I.jsx)(He.a,{name:"cogs"})}),Object(I.jsx)(ce.a.Content,{hidden:!0,children:"Edit"})]})}),Object(I.jsx)(re.a.Cell,{children:n}),Object(I.jsx)(re.a.Cell,{children:r}),s&&Object(I.jsx)(re.a.Cell,{children:ue()(i).format("YYYY-MM-DD HH:mm:ss")}),!s&&Object(I.jsx)(re.a.Cell,{}),Object(I.jsx)(re.a.Cell,{textAlign:"right",children:(a=c,0!==a&&a?"R "+a.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 "):"R 0.00")})]},n)}))),Object(I.jsx)(C.a,{children:Object(I.jsxs)(re.a,{compact:!0,celled:!0,definition:!0,sortable:!0,striped:!0,children:[Object(I.jsx)(re.a.Header,{children:Object(I.jsxs)(re.a.Row,{children:[Object(I.jsx)(re.a.HeaderCell,{}),Object(I.jsx)(re.a.HeaderCell,{children:"Customer Reference"}),Object(I.jsx)(re.a.HeaderCell,{children:"Customer"}),Object(I.jsx)(re.a.HeaderCell,{children:"Most Recent Invoice Viewed"}),Object(I.jsx)(re.a.HeaderCell,{children:"Total Outstanding"})]})}),Object(I.jsx)(re.a.Body,{children:o}),Object(I.jsx)(re.a.Footer,{fullWidth:!0,children:Object(I.jsxs)(re.a.Row,{children:[Object(I.jsx)(re.a.HeaderCell,{}),Object(I.jsxs)(re.a.HeaderCell,{colSpan:"4",children:[Object(I.jsxs)(ce.a,{as:X.a,to:"/customers/create",floated:"right",icon:!0,labelPosition:"left",primary:!0,size:"small",children:[Object(I.jsx)(He.a,{name:"user"})," Add Customer"]}),Object(I.jsx)(ce.a,{size:"small",children:"Approve"}),Object(I.jsx)(ce.a,{disabled:!0,size:"small",children:"Approve All"})]})]})})]})})},qe=function(e){var t,a=e.match.params.id,n=Object(r.useState)(null),s=Object(D.a)(n,2),i=s[0],c=s[1],l=Object(r.useState)("idle"),o=Object(D.a)(l,2),u=o[0],d=o[1],j=Object(r.useState)(null),b=Object(D.a)(j,2),m=b[0],A=b[1],h=Object(r.useState)("idle"),f=Object(D.a)(h,2),p=f[0],O=f[1];if(Object(r.useEffect)((function(){function e(){return(e=Object(P.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("loading"),e.t0=A,e.next=4,Ue.getById(a);case 4:e.t1=e.sent,(0,e.t0)(e.t1),O("succeeded");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(P.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("loading"),e.t0=c,e.next=4,Fe.getAccount(a);case 4:e.t1=e.sent,(0,e.t0)(e.t1),d("succeeded");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[a]),"loading"===u||"loading"===p)t=Object(I.jsx)(se.a,{active:!0,inverted:!0,children:Object(I.jsx)(ie.a,{inverted:!0,content:"Loading"})});else if("error"===u||"error"===p)t=Object(I.jsx)(Be.a,{children:"error"});else if("succeeded"===u||"succeeded"===p){var g=m.customerRefNo,x=m.customerName,v=i.days30,y=i.days60,N=i.days90;console.log("account: ",i),console.log("customer: ",m),t=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(Ce.a.Group,{children:[Object(I.jsx)(Ce.a.Input,{defaultValue:g,label:"Customer Reference"}),Object(I.jsx)(Ce.a.Input,{defaultValue:x,label:"Customer Name"})]}),Object(I.jsxs)(Ce.a.Group,{children:[Object(I.jsx)(Ce.a.Input,{defaultValue:v,label:"30 Days"}),Object(I.jsx)(Ce.a.Input,{defaultValue:y,label:"60 Days"}),Object(I.jsx)(Ce.a.Input,{defaultValue:N,label:"90 Days"})]})]})}return Object(I.jsx)(C.a,{children:Object(I.jsx)(Ce.a,{children:t})})},We=a(472),Ge=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).saveAndContinue=function(t){t.preventDefault(),e.props.nextStep()},e}return Object(T.a)(a,[{key:"render",value:function(){var e=this.props.values;return Object(I.jsxs)(w.a.Column,{children:[Object(I.jsx)(le.a,{textAlign:"center",children:Object(I.jsx)("h1",{children:"Enter Customer Details"})}),Object(I.jsxs)(Ce.a,{children:[Object(I.jsxs)(J.a,{children:[Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Customer Reference Number"}),Object(I.jsx)("input",{placeholder:"Customer Reference Number",onChange:this.props.handleChange("customerRefNo"),defaultValue:e.customerRefNo})]}),Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Customer Name"}),Object(I.jsx)("input",{placeholder:"Customer Name",onChange:this.props.handleChange("customerName"),defaultValue:e.customerName})]}),Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Customer Entity"}),Object(I.jsx)("input",{placeholder:"Customer Entity",onChange:this.props.handleChange("customerEntity"),defaultValue:e.customerEntity})]})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Registration Number"}),Object(I.jsx)("input",{placeholder:"Registration Number",onChange:this.props.handleChange("regIdNumber"),defaultValue:e.regIdNumber})]}),Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Customer Type"}),Object(I.jsx)("input",{placeholder:"Customer Type",onChange:this.props.handleChange("customerType"),defaultValue:e.customerType})]}),Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Product Type"}),Object(I.jsx)("input",{placeholder:"Product Type",onChange:this.props.handleChange("productType"),defaultValue:e.productType})]})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Address Line 1"}),Object(I.jsx)("input",{placeholder:"Address Line 1",onChange:this.props.handleChange("address1"),defaultValue:e.address1})]}),Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Address Line 2"}),Object(I.jsx)("input",{placeholder:"Address Line 2",onChange:this.props.handleChange("address2"),defaultValue:e.address2})]}),Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Address Line 3"}),Object(I.jsx)("input",{placeholder:"Address Line 3",onChange:this.props.handleChange("address3"),defaultValue:e.address3})]})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Address Line 4"}),Object(I.jsx)("input",{placeholder:"Address Line 4",onChange:this.props.handleChange("address4"),defaultValue:e.address4})]}),Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Address Line 5"}),Object(I.jsx)("input",{placeholder:"Address Line 5",onChange:this.props.handleChange("address5"),defaultValue:e.address5})]}),Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Client ID"}),Object(I.jsx)("input",{placeholder:"Client ID",onChange:this.props.handleChange("f_clientId"),defaultValue:e.f_clientId})]})]})]}),Object(I.jsx)(J.a,{children:Object(I.jsx)(ce.a,{onClick:this.saveAndContinue,children:"Save And Continue"})})]})]})}}]),a}(r.Component),Ze=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).saveAndContinue=function(t){t.preventDefault(),e.props.nextStep()},e.back=function(t){t.preventDefault(),e.props.prevStep()},e}return Object(T.a)(a,[{key:"render",value:function(){var e=this.props.values;return Object(I.jsxs)(w.a.Column,{style:{maxWidth:450},children:[Object(I.jsx)(le.a,{textAlign:"center",children:Object(I.jsx)("h1",{children:"Enter Account Details"})}),Object(I.jsxs)(Ce.a,{children:[Object(I.jsxs)(J.a,{children:[Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Direct Debit Date"}),Object(I.jsx)("input",{placeholder:"Direct Debit Date",onChange:this.props.handleChange("directDebitDate"),defaultValue:e.directDebitDate})]}),Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Payment Term Days"}),Object(I.jsx)("input",{placeholder:"Payment Term Days",onChange:this.props.handleChange("paymentTermDays"),defaultValue:e.paymentTermDays})]})]}),Object(I.jsxs)(J.a,{textAlign:"center",children:[Object(I.jsx)(ce.a,{onClick:this.back,children:"Back"}),Object(I.jsx)(ce.a,{onClick:this.saveAndContinue,children:"Save And Continue"})]})]})]})}}]),a}(r.Component),Ke=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).saveAndContinue=function(t){t.preventDefault(),e.props.nextStep()},e.back=function(t){t.preventDefault(),e.props.prevStep()},e}return Object(T.a)(a,[{key:"render",value:function(){var e=this.props.values;return Object(I.jsxs)(w.a.Column,{style:{maxWidth:450},children:[Object(I.jsx)(le.a,{textAlign:"center",children:Object(I.jsx)("h1",{children:"Enter Contact Details"})}),Object(I.jsxs)(Ce.a,{children:[Object(I.jsxs)(J.a,{children:[Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Primary Contact Name"}),Object(I.jsx)("input",{placeholder:"Primary Contact Name",onChange:this.props.handleChange("primaryContactName"),defaultValue:e.primaryContactName})]}),Object(I.jsxs)(Ce.a.Field,{children:[Object(I.jsx)("label",{children:"Primary Contact Number"}),Object(I.jsx)("input",{placeholder:"Primary Contact Number",onChange:this.props.handleChange("primaryContactNumber"),defaultValue:e.primaryContactNumber})]})]}),Object(I.jsxs)(J.a,{textAlign:"center",children:[Object(I.jsx)(ce.a,{onClick:this.back,children:"Back"}),Object(I.jsx)(ce.a,{onClick:this.saveAndContinue,children:"Save And Continue"})]})]})]})}}]),a}(r.Component),Je=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).saveAndContinue=function(t){t.preventDefault(),e.props.nextStep()},e.back=function(t){t.preventDefault(),e.props.prevStep()},e}return Object(T.a)(a,[{key:"render",value:function(){var e=this.props.values,t=e.customerRefNo,a=e.customerName,n=e.customerEntity,r=e.regIdNumber,s=e.customerType,i=e.productType,c=e.address1,l=e.address2,o=e.address3,u=e.address4,d=e.address5,j=e.f_clientId,b=(e.accountNumber,e.accountName,e.openDate,e.debtorAge,e.paymentTermDays),m=(e.creditLimit,e.totalBalance,e.amountDue,e.currentBalance,e.days30,e.days60,e.days90,e.days120,e.days150,e.days180,e.days180Over,e.paymentMethod,e.paymentDueDate,e.debitOrderDate),A=(e.accountNotes,e.accountStatus,e.primaryContactName),h=e.primaryContactNumber;return Object(I.jsxs)(w.a.Column,{style:{maxWidth:450},children:[Object(I.jsxs)(le.a,{textAlign:"center",children:[Object(I.jsx)("h1",{children:"Confirm Customer Details"}),Object(I.jsx)("p",{children:"Click Confirm if the following details have been correctly entered"})]}),Object(I.jsx)(J.a,{children:Object(I.jsxs)(Z.a,{divided:!0,relaxed:!0,children:[Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"users",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Customer Reference Number: ",t]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"users",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Customer Name: ",a]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"caret up",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Customer Entity: ",n]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"building outline",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Registration Number: ",r]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"caret up",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Customer Type: ",s]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"caret up",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Product Type: ",i]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"caret up",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Customer Entity: ",n]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"building outline",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Address Line 1: ",c]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"building outline",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Address Line 2: ",l]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"building outline",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Address Line 3: ",o]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"building outline",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Address Line 4: ",u]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"building outline",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Address Line 5: ",d]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"user",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Client ID: ",j]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"calendar",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Direct Debit Date: ",m]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"calendar",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Payment Terms: ",b]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"marker",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Primary Contact Name: ",A]})]}),Object(I.jsxs)(Z.a.Item,{children:[Object(I.jsx)(Z.a.Icon,{name:"marker",size:"large"}),Object(I.jsxs)(Z.a.Content,{children:["Primary Contact Number: ",h]})]})]})}),Object(I.jsxs)(J.a,{textAlign:"center",children:[Object(I.jsx)(ce.a,{onClick:this.back,children:"Back"}),Object(I.jsx)(ce.a,{onClick:this.saveAndContinue,children:"Confirm"})]})]})}}]),a}(r.Component),Xe=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(){return Object(R.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){return Object(I.jsx)(w.a.Column,{style:{maxWidth:450},children:Object(I.jsx)(le.a,{textAlign:"center",children:Object(I.jsx)("h1",{children:"Details Successfully Saved"})})})}}]),a}(r.Component),Qe=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={step:1,customerRefNo:"",customerName:"",customerEntity:"",regIdNumber:"",customerType:"",productType:"",address1:"",address2:"",address3:"",address4:"",address5:"",f_clientId:"",directDebitDate:"",paymentTermDays:"",primaryContactName:"",primaryContactNumber:""},e.nextStep=function(){var t=e.state.step;e.setState({step:t+1})},e.prevStep=function(){var t=e.state.step;e.setState({step:t-1})},e.handleChange=function(t){return function(a){e.setState(Object(we.a)({},t,a.target.value))}},e}return Object(T.a)(a,[{key:"render",value:function(){var e,t=this.state.step,a=this.state,n={customerRefNo:a.customerRefNo,customerName:a.customerName,customerEntity:a.customerEntity,regIdNumber:a.regIdNumber,customerType:a.customerType,productType:a.productType,address1:a.address1,address2:a.address2,address3:a.address3,address4:a.address4,address5:a.address5,f_clientId:a.f_clientId,directDebitDate:a.directDebitDate,paymentTermDays:a.paymentTermDays,primaryContactName:a.primaryContactName,primaryContactNumber:a.primaryContactNumber};switch(t){case 1:e=Object(I.jsx)(Ge,{nextStep:this.nextStep,handleChange:this.handleChange,values:n});break;case 2:e=Object(I.jsx)(Ze,{nextStep:this.nextStep,prevStep:this.prevStep,handleChange:this.handleChange,values:n});break;case 3:e=Object(I.jsx)(Ke,{nextStep:this.nextStep,prevStep:this.prevStep,handleChange:this.handleChange,values:n});break;case 4:e=Object(I.jsx)(Je,{nextStep:this.nextStep,prevStep:this.prevStep,values:n});break;case 5:e=Object(I.jsx)(Xe,{});break;default:e=Object(I.jsx)(Be.a,{children:"Something went wrong"})}return Object(I.jsxs)(C.a,{children:[Object(I.jsxs)(We.a.Group,{fluid:!0,ordered:!0,children:[Object(I.jsx)(We.a,{active:1===t,completed:t>1,children:Object(I.jsxs)(We.a.Content,{children:[Object(I.jsx)(We.a.Title,{children:"Customer Details"}),Object(I.jsx)(We.a.Description,{children:"Customer name, entity type, etc."})]})}),Object(I.jsx)(We.a,{active:2===t,completed:t>2,children:Object(I.jsxs)(We.a.Content,{children:[Object(I.jsx)(We.a.Title,{children:"Account Details"}),Object(I.jsx)(We.a.Description,{children:"Payment terms, direct debit date, etc."})]})}),Object(I.jsx)(We.a,{active:3===t,completed:t>3,children:Object(I.jsxs)(We.a.Content,{children:[Object(I.jsx)(We.a.Title,{children:"Contact Information"}),Object(I.jsx)(We.a.Description,{children:"Primary contact information"})]})}),Object(I.jsx)(We.a,{active:4===t,completed:t>4,children:Object(I.jsxs)(We.a.Content,{children:[Object(I.jsx)(We.a.Title,{children:"Confirmation"}),Object(I.jsx)(We.a.Description,{children:"Confirmation of information entered"})]})})]}),e]})}}]),a}(r.Component),_e=function(){return Object(I.jsx)(C.a,{children:"Client Creator"})},$e=function(){return Object(I.jsx)(C.a,{children:"Client Editor"})},et={getAll:function(){return A.get("/clients")},getById:function(e){return A.get("/clients/".concat(e))},create:function(e){return A.post("/clients",e)},update:function(e,t){return A.put("/clients/".concat(e),t).then((function(e){return e}))},delete:function(e){return A.delete("/clients/".concat(e)).then((function(e){return e}))}};var tt=function(){var e=Object(r.useState)(null),t=Object(D.a)(e,2),a=(t[0],t[1]),n=Object(r.useState)("idle"),s=Object(D.a)(n,2),i=(s[0],s[1]);return Object(r.useEffect)((function(){function e(){return(e=Object(P.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i("loading"),e.t0=a,e.next=4,et.getAll();case 4:e.t1=e.sent,(0,e.t0)(e.t1),i("succeeded");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.scrollTo(0,0),function(){e.apply(this,arguments)}()}),[]),Object(I.jsx)(C.a,{children:"Clients"})},at=a(20),nt=a(224),rt=a.n(nt),st=function(e){for(var t=[],a=rt.a.utils.decode_range(e).e.c+1,n=0;n<a;++n)t[n]={name:rt.a.utils.encode_col(n),key:n};return t},it=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(e){return"."+e})).join(","),ct=a(747),lt=a(475),ot=a(750),ut=new lt.a,dt="default-alert",jt={onAlert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt;return ut.asObservable().pipe(Object(ot.a)((function(t){return t&&t.id===e})))},success:function(e,t,a){ft(Object(l.a)(Object(l.a)({},a),{},{type:bt,header:e,message:t}))},error:function(e,t,a){ft(Object(l.a)(Object(l.a)({},a),{},{type:mt,header:e,message:t}))},info:function(e,t,a){ft(Object(l.a)(Object(l.a)({},a),{},{type:At,header:e,message:t}))},warn:function(e,t,a){ft(Object(l.a)(Object(l.a)({},a),{},{type:ht,header:e,message:t}))},alert:ft,clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt;ut.next({id:e})}},bt="Success",mt="Error",At="Info",ht="Warning";function ft(e){e.id=e.id||dt,e.autoClose=void 0===e.autoClose||e.autoClose,ut.next(e)}var pt={bulkCreate:function(e,t){return A.post("/".concat(e,"/bulk"),t)},create:function(e,t){return A.post("/".concat(e),t)}};var Ot="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Qm+aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+IDxkYzpjcmVhdG9yPiA8cmRmOlNlcT4gPHJkZjpsaT5WZWN0b3JTdG9jay5jb20vMjI2OTE1MDU8L3JkZjpsaT4gPC9yZGY6U2VxPiA8L2RjOmNyZWF0b3I+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAD6AO4DAREAAhEBAxEB/8QAHQABAAICAwEBAAAAAAAAAAAAAAgJBgcB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",gt=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(R.a)(this,a),(n=t.call(this,e)).fileInputRef=s.a.createRef(),n.state={file:{},data:[],cols:[],prgress:0,workspaces:{ids:["customers","accounts","contacts","cases","outcomes"],entities:{customers:{errors:[],loading:!1,numberRecords:0,checked:!1,progress:0},accounts:{errors:[],loading:!1,numberRecords:0,checked:!1,progress:0},contacts:{errors:[],loading:!1,numberRecords:0,checked:!1,progress:0},cases:{errors:[],loading:!1,numberRecords:0,checked:!1,progress:0},outcomes:{errors:[],loading:!1,numberRecords:0,checked:!1,progress:0}}}},n.handleFile=n.handleFile.bind(Object(at.a)(n)),n.handleChange=n.handleChange.bind(Object(at.a)(n)),n}return Object(T.a)(a,[{key:"handleChange",value:function(e){var t=e.target.files;t&&t[0]&&this.setState({file:t[0]})}},{key:"handleFile",value:function(e){var t=this,a=e.target.name,n=new FileReader,r=!!n.readAsBinaryString;n.onload=function(e){var n=e.target.result,s=rt.a.read(n,{type:r?"binary":"array",bookVBA:!0}),i=s.SheetNames[0],c=s.Sheets[i],o=rt.a.utils.sheet_to_json(c),u=t.state.workspaces.entities[a];u.numberRecords=o.length,t.setState(Object(l.a)(Object(l.a)({data:o,cols:st(c["!ref"])},t.state),{},{workspaceObject:u}),Object(P.a)(S.a.mark((function n(){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{t.checkData(a,o)&&(u.checked=!0,t.setState(Object(l.a)(Object(l.a)({},t.state),{},{workspaceObject:u})),t.uploadData(a,o))}catch(e){console.log("Uploading Collection update file problem (e): ",e),t.errorReporting.sendMessage({error:"handleFile error: ".concat(e),fileName:"ExcelReader.js",dateTime:ue()(new Date).format("YYYY-MM-DD HH:mm:ss"),user:sessionStorage.getItem("cwsUser"),state:JSON.stringify(t.state)})}case 1:case"end":return n.stop()}}),n)}))))},r?n.readAsBinaryString(this.state.file):n.readAsArrayBuffer(this.state.file)}},{key:"checkData",value:function(e,t){var a=this.state.workspaces.entities[e],n=[];switch(e){case"customers":t.forEach((function(e,t){void 0===e.CustomerNumber&&n.push("Record id: ".concat(t+1," CustomerNumber is missing")),void 0===e.Customer&&n.push("Record id: ".concat(t+1," Customer is missing"))}));break;case"accounts":t.forEach((function(e,t){void 0===e.AccountNumber&&n.push("Record id: ".concat(t+1," AccountNumber is missing")),void 0===e.AccountStatus&&n.push("Record id: ".concat(t+1," AccountStatus is missing")),void 0===e.CustomerRefNo&&n.push("Record id: ".concat(t+1," CustomerRefNo is missing")),ue()(e.DateCreated).isValid()||n.push("Record id: ".concat(t+1," DateCreated is incorrectly formatted"))}));break;case"contacts":t.forEach((function(e,t){void 0===e.AccountNumber&&n.push("Record id: ".concat(t+1," AccountNumber is missing"))}));break;case"cases":t.forEach((function(e,t){void 0===e.AccountNumber&&n.push("Record id: ".concat(t+1," AccountNumber is missing")),void 0===e.CurrentAssignment&&n.push("Record id: ".concat(t+1," CurrentAssignment is missing")),void 0===e.CurrentStatus&&n.push("Record id: ".concat(t+1," CurrentStatus is missing"))}));break;case"outcomes":t.forEach((function(e,t){void 0===e.CaseNumber&&n.push("Record id: ".concat(t+1," CaseNumber is missing"))}));break;default:n.push("No workspace identified for ".concat(e))}return a.errors=n,this.setState(Object(l.a)(Object(l.a)({},this.state),{},{workspaceObject:a})),!(n.length>0)}},{key:"chunkData",value:function(e){for(var t=400,a=e.length%t===0?Math.floor(e.length/t):Math.floor(e.length/t)+1,n=[],r=0;r<a;r++){var s=r*t,i=s+t,c=e.slice(s,i);n.push(c)}return this.setState({chunkedData:n}),n}},{key:"uploadData",value:function(){var e=Object(P.a)(S.a.mark((function e(t,a){var n,r,s,i,c,o,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.state.workspaces.entities[t]).loading=!0,n.progress=0,this.setState(Object(l.a)(Object(l.a)({},this.state),{},{workspaceObject:n})),r=0,e.t0=t,e.next="customers"===e.t0?8:"accounts"===e.t0?10:"contacts"===e.t0?12:"cases"===e.t0?14:"outcomes"===e.t0?16:18;break;case 8:return s=this.prepCustomerRecords(a),e.abrupt("break",19);case 10:return s=this.prepAccountRecords(a),e.abrupt("break",19);case 12:return s=this.prepContactRecords(a),e.abrupt("break",19);case 14:return s=this.prepCaseRecords(a),e.abrupt("break",19);case 16:return s=this.prepOutcomeRecords(a),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:i=this.chunkData(s),c=0;case 21:if(!(c<i.length)){e.next=31;break}return e.next=24,this.postToDb(i[c],t).then(this.setState({progress:Math.round((c+1)/i.length*100)}));case 24:o=e.sent,jt.success("Success","".concat(o," rows were successfully uploaded to ").concat(t)),void 0!==o.errno&&(u=[],(u=this.state.customerErrors).push(o.data),this.setState({customerErrors:u})),r+=o.affectedRows;case 28:c++,e.next=21;break;case 31:return n.loading=!1,n.progress=100,e.abrupt("return",r);case 34:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"prepCustomerRecords",value:function(e){var t=[];return e.forEach((function(e){var a=[];"Enterprise"===e.CustomerEntity?a={operatorShortCode:e.OperatorShortCode,customerRefNo:e.CustomerNumber,customerName:e.Customer,customerEntity:e.CustomerEntity,regIdNumber:e.CompanyRegNo,customerType:e.Customer_Type,productType:e.ProductType,createdBy:"System",regIdStatus:e.CIPCStatus,f_clientId:1}:"Consumer"===e.CustomerEntity&&(a={operatorShortCode:e.OperatorShortCode,customerRefNo:e.CustomerNumber,customerName:e.Customer,customerEntity:e.CustomerEntity,regIdNumber:e.ConsumerIDNumber,customerType:e.Customer_Type,productType:e.ProductType,createdBy:"System",regIdStatus:e.IDVStatus,f_clientId:1}),t.push(a)})),t}},{key:"prepAccountRecords",value:function(e){var t=this,a=[];return e.forEach((function(e){var n=e.paymentDueDate?ue()(t.ExcelDateToJSDate(e.paymentDueDate)).format("YYYY-MM-DD"):null,r=e.debitOrderDate?ue()(t.ExcelDateToJSDate(e.debitOrderDate)).format("YYYY-MM-DD"):null,s=e.lastPaymentDate?ue()(t.ExcelDateToJSDate(e.lastPaymentDate)).format("YYYY-MM-DD"):null,i=e.lastPTPDate?ue()(t.ExcelDateToJSDate(e.lastPTPDate)).format("YYYY-MM-DD"):null,c=e.DateCreated?ue()(t.ExcelDateToJSDate(e.DateCreated)).format("YYYY-MM-DD"):null,l={accountNumber:e.AccountNumber,accountName:e.AccountName,createdBy:"System",openDate:c,debtorAge:e.DebtorAge,creditLimit:e.CreditLimit,currentBalance:e.CurrentBalance,days30:e.days30,days60:e.days60,days90:e.days90,days120:e.days120,days150:e.days150,days180:e.days180,days180Over:e.days180Over,f_customerRefNo:e.AccountNumber,lastPTPDate:i,paymentDueDate:n,debitOrderDate:r,lastPaymentDate:s,paymentMethod:e.PaymentMethod,paymentTermDays:e.PaymentTerms,totalBalance:e.TotalBalance};a.push(l)})),a}},{key:"prepCaseRecords",value:function(e){var t=this,a=[];return e.forEach((function(e){var n=e.DateCreated?ue()(t.ExcelDateToJSDate(e.DateCreated)).format("YYYY-MM-DD HH:mm:ss"):null,r=e.nextVisitDateTime?ue()(t.ExcelDateToJSDate(e.nextVisitDateTime)).format("YYYY-MM-DD HH:mm:ss"):null,s=e.DateLastUpdated?ue()(t.ExcelDateToJSDate(e.DateLastUpdated)).format("YYYY-MM-DD HH:mm:ss"):null,i=e.DateReopened?ue()(t.ExcelDateToJSDate(e.DateReopened)).format("YYYY-MM-DD HH:mm:ss"):null,c={caseNumber:e.CaseNumber,f_accountNumber:e.AccountNumber,createdAt:n,createdBy:e.CreatedBy,currentAssignment:e.CurrentAssignment,nextVisitDateTime:r,updatedDate:s,updatedBy:e.LastUpdatedBy,reopenedDate:i,reopenedBy:e.ReopenedBy,caseReason:e.CaseReason,currentStatus:e.CurrentStatus,caseNotes:e.CaseNotes};a.push(c)})),a}},{key:"prepOutcomeRecords",value:function(e){var t=this,a=[];return e.forEach((function(e){var n=e.DateCreated?e.DateCreated:null,r=e.PTPDate?ue()(t.ExcelDateToJSDate(e.PTPDate)).format("YYYY-MM-DD HH:mm:ss"):null,s=e.DebtOrderDate?ue()(t.ExcelDateToJSDate(e.DebtOrderDate)).format("YYYY-MM-DD HH:mm:ss"):null,i={f_caseNumber:e.CaseNumber,createdAt:n,createdBy:e.CreatedBy,outcomeStatus:e.Status,transactionType:e.TransactionType,numberCalled:e.PhoneNumberCalled,EmailAddressUsed:e.emailUsed,contactPerson:e.ContactPerson,outcomeResolution:e.Resolution,nextSteps:e.NextSteps,ptpDate:r,ptpAmount:e.PTPAmount,debitResubmissionDate:s,debitResubmissionAmount:e.DebitOrderAmount,outcomeNotes:e.OutcomeNotes};a.push(i)})),a}},{key:"prepContactRecords",value:function(e){var t=[];return e.forEach((function(e){var a={f_accountNumber:e.AccountNumber,primaryContactName:e.PrimaryContactName,primaryContactNumber:e.PrimaryContactNumber,primaryContactEmail:e.PrimaryEmailAddress,representativeName:e.RepresentativeName,representativeNumber:e.RepresentativeContactNumber,representativeEmail:e.RepresentativeEmailAddress,alternativeRepName:e.AltRepName,alternativeRepNumber:e.AltRepContact,alternativeRepEmail:e.AltRepEmail,otherNumber1:e.OtherContact1,otherNumber2:e.OtherContact2,otherNumber3:e.OtherContact3,otherNumber4:e.OtherContact4,otherNumber5:e.OtherContact5,otherEmail1:e.OtherEmail1,otherEmail2:e.OtherEmail2,otherEmail3:e.OtherEmail3,otherEmail4:e.OtherEmail4,otherEmail5:e.OtherEmail5,dnc1:e.DNC1,dnc2:e.DNC2,dnc3:e.DNC3,dnc4:e.DNC4,dnc5:e.DNC5};t.push(a)})),t}},{key:"ExcelDateToJSDate",value:function(e){return new Date(Math.round(86400*(e-25569)*1e3))}},{key:"postToDb",value:function(){var e=Object(P.a)(S.a.mark((function e(t,a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pt.bulkCreate(a,t));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.progress,n=t.workspaces,r=n.ids.map((function(t,r){return Object(I.jsxs)(w.a,{children:[Object(I.jsx)(w.a.Row,{children:Object(I.jsxs)(w.a.Column,{width:8,children:[Object(I.jsxs)(Be.a,{children:["Import new ",t]}),Object(I.jsx)(ce.a,{content:"Choose File",labelPosition:"left",icon:"file",onClick:function(){return e.fileInputRef.current.click()}}),Object(I.jsx)("input",{accept:it,hidden:!0,id:"file",onChange:e.handleChange,ref:e.fileInputRef,type:"file"}),Object(I.jsx)(ce.a,{onClick:e.handleFile,name:t,type:"submit",children:"Upload"}),n.entities[t].loading&&Object(I.jsx)(ct.a,{color:"teal",file:t,percent:a}),100===n.entities[t].progress&&Object(I.jsx)("img",{src:Ot,alt:"Green tick",width:"55",height:"45"})]})}),Object(I.jsx)("br",{}),Object(I.jsx)("br",{})]},r)}));return Object(I.jsx)(C.a,{children:r})}}]),a}(r.Component),xt=a(395),Ct=a(741),vt=function(e){var t=e.data,a=e.description,n=e.report,r=e.styleType,s=e.title;return Object(I.jsx)("div",{children:n?t?Object(I.jsx)("div",{children:Object(I.jsx)(U,{chartNumber:null,data:t,description:a,styleType:r,title:s})}):void 0:Object(I.jsx)("div",{children:"Please select a report"})})},It=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(R.a)(this,a),(n=t.call(this,e)).state={reports:{ids:["aging","agentPTP","datePTP"],entities:{aging:{data:null,description:"Amount owed per period",title:"Aging",type:"bar"},agentPTP:{data:null,description:"PTP sum per agent",title:"PTP by Agent",type:"bar"},datePTP:{data:null,description:"PTP sum per date",title:"PTP by Date",type:"bar"}}},selected:null,visible:!0},n}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.scrollTo(0,0),this.loadData(),this.interval=setInterval((function(){return e.loadData()}),18e5)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"loadData",value:function(){var e=this;this.state.reports.ids.forEach(function(){var t=Object(P.a)(S.a.mark((function t(a){var n,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.state.reports.entities[a]).data=null,e.setState(Object(l.a)(Object(l.a)({},e.state),{},{reportObject:n})),t.next=5,W.getReport(a);case 5:r=t.sent,n.data=e.prepData(r),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{reportObject:n}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"prepData",value:function(e){var t=[];if(1===e.length)for(var a=0,n=Object.entries(e[0]);a<n.length;a++){var r=Object(D.a)(n[a],2),s=r[0],i=r[1],c={};c.name=s,c.value=i,t.push(c)}else for(var l=0;l<e.length;l++){for(var o=Object.entries(e[l]),u={},d=0,j=Object.entries(o);d<j.length;d++){var b=Object(D.a)(j[d],2),m=b[0],A=b[1];"0"===m&&(u.name=A[1]),"1"===m&&(u.value=A[1])}t.push(u)}return t}},{key:"customChartRender",value:function(){var e=this,t=this.state.reports;return t.ids.map((function(a,n){return"bar"===t.entities[a].type?Object(I.jsx)("div",{style:{paddingBottom:"15px"},children:Object(I.jsx)(ce.a,{onClick:function(){e.setState({selected:a,visible:!1})},style:{backgroundColor:"white",border:"1px solid black",paddingBottom:"15px"},children:Object(I.jsxs)(w.a.Column,{width:4,style:{padding:0},children:[t.entities[a].data&&Object(I.jsx)(U,{chartNumber:n,data:t.entities[a].data,description:t.entities[a].description,styleType:"sidebar",title:t.entities[a].title}),!t.entities[a].data&&Object(I.jsx)("div",{children:Object(I.jsxs)(w.a.Column,{width:4,style:{padding:0},children:[Object(I.jsx)("div",{className:"ui active inverted dimmer",children:Object(I.jsx)("div",{className:"ui text loader",children:"Loading"})}),Object(I.jsx)("p",{})]})},n)]})})},n):"line"===t.entities[a].type?Object(I.jsx)("div",{children:Object(I.jsxs)(w.a.Column,{width:4,style:{padding:0},children:[t.entities[a].data&&Object(I.jsx)(q,{chartNumber:n,data:t.entities[a].data,description:t.entities[a].description,styleType:"sidebar",title:t.entities[a].title}),!t.entities[a].data&&Object(I.jsx)("div",{children:Object(I.jsxs)(w.a.Column,{width:4,style:{padding:0},children:[Object(I.jsx)("div",{className:"ui active inverted dimmer",children:Object(I.jsx)("div",{className:"ui text loader",children:"Loading"})}),Object(I.jsx)("p",{})]})},n)]})},n):Object(I.jsx)("div",{children:" No report type found"},n)}))}},{key:"refreshButtonRender",value:function(){var e=this;return Object(I.jsxs)(Be.a,{children:["Auto-refresh every 30 minutes or"," ",Object(I.jsx)(ce.a,{onClick:function(){e.loadData()},primary:!0,children:"Reload"}),Object(I.jsx)(xt.a,{checked:this.state.visible,label:{children:Object(I.jsx)("p",{children:"Show report selection"})},onChange:function(t,a){return e.setVisible(a.checked)}})]})}},{key:"selectedChartRender",value:function(){if(this.state.selected){var e=this.state.reports.entities[this.state.selected],t=e.data,a=e.description,n=e.title;return Object(I.jsx)(vt,{data:t,description:a,report:this.state.selected,styleType:"main",title:n})}return Object(I.jsx)("div",{children:"Please select a report"})}},{key:"setVisible",value:function(e){this.setState({visible:e})}},{key:"render",value:function(){var e=this;return Object(I.jsx)(C.a,{fluid:!0,children:Object(I.jsxs)(w.a,{columns:1,divided:!0,stackable:!0,textAlign:"center",children:[Object(I.jsx)(w.a.Column,{children:this.refreshButtonRender()}),Object(I.jsx)(w.a.Column,{children:Object(I.jsxs)(Ct.a.Pushable,{as:J.a,children:[Object(I.jsxs)(Ct.a,{as:J.a,animation:"overlay",color:"grey",icon:"labeled",onHide:function(){return e.setVisible(!1)},vertical:!0,visible:this.state.visible,width:"wide",children:[Object(I.jsx)(le.a,{as:"h2",children:"Report Selection"}),this.customChartRender()]}),Object(I.jsx)(Ct.a.Pusher,{style:{height:"100vh"},children:this.selectedChartRender()})]})})]})})}}]),a}(s.a.Component),yt=function(){return Object(I.jsx)(C.a,{children:Object(I.jsx)(w.a,{columns:2,children:Object(I.jsxs)(w.a.Row,{children:[Object(I.jsx)(w.a.Column,{children:Object(I.jsxs)(re.a,{celled:!0,children:[Object(I.jsx)(re.a.Header,{children:Object(I.jsxs)(re.a.Row,{children:[Object(I.jsx)(re.a.HeaderCell,{children:"Release"}),Object(I.jsx)(re.a.HeaderCell,{children:"Date"})]})}),Object(I.jsxs)(re.a.Body,{children:[Object(I.jsxs)(re.a.Row,{children:[Object(I.jsxs)(re.a.Cell,{children:[Object(I.jsx)(le.a,{children:"Responsive menus"}),Object(I.jsx)(He.a,{name:"code",color:"blue"}),"Menus are now responsive to the screen size. Their exact content will be determined in time."]}),Object(I.jsx)(re.a.Cell,{children:"2021/09/01"})]}),Object(I.jsxs)(re.a.Row,{children:[Object(I.jsxs)(re.a.Cell,{children:[Object(I.jsx)(le.a,{children:"Invoice sent via email"}),Object(I.jsx)(He.a,{name:"code",color:"blue"}),"Invoices sent via email with embedded token. The date and time the link is clicked are saved and will be displayed in the Customer section (WIP)"]}),Object(I.jsx)(re.a.Cell,{children:"2021/09/01"})]}),Object(I.jsxs)(re.a.Row,{children:[Object(I.jsxs)(re.a.Cell,{children:[Object(I.jsx)(le.a,{children:"Resend email link to join"}),Object(I.jsx)(He.a,{name:"code",color:"blue"}),"Able to resend the invitation to join via email from the User Admin section - Admin only"]}),Object(I.jsx)(re.a.Cell,{children:"2021/08/18"})]}),Object(I.jsxs)(re.a.Row,{children:[Object(I.jsxs)(re.a.Cell,{children:[Object(I.jsx)(le.a,{children:"Search function for Collections workspace"}),Object(I.jsx)(He.a,{name:"code",color:"blue"}),"Users can search for collection records based on customer name (more fields to come later)"]}),Object(I.jsx)(re.a.Cell,{children:"2021/08/17"})]})]})]})}),Object(I.jsx)(w.a.Column,{children:Object(I.jsxs)(re.a,{celled:!0,children:[Object(I.jsx)(re.a.Header,{children:Object(I.jsxs)(re.a.Row,{children:[Object(I.jsx)(re.a.HeaderCell,{children:"Bug"}),Object(I.jsx)(re.a.HeaderCell,{children:"Identified"}),Object(I.jsx)(re.a.HeaderCell,{children:"Resolved"})]})}),Object(I.jsxs)(re.a.Body,{children:[Object(I.jsxs)(re.a.Row,{positive:!0,children:[Object(I.jsxs)(re.a.Cell,{children:[Object(I.jsx)(le.a,{children:"Profile details blank"}),Object(I.jsx)(He.a,{name:"bug",color:"red"}),"Profile details blank when opening Profile tab from menu"]}),Object(I.jsx)(re.a.Cell,{children:"2021/08/17"}),Object(I.jsx)(re.a.Cell,{children:"2021/08/18"})]}),Object(I.jsxs)(re.a.Row,{positive:!0,children:[Object(I.jsxs)(re.a.Cell,{children:[Object(I.jsx)(le.a,{children:"Collections workspace table format"}),Object(I.jsx)(He.a,{name:"bug",color:"red"}),"The contents of the table in the Collections workspace do not automatically resize to fit the screen width"]}),Object(I.jsx)(re.a.Cell,{children:"2021/08/17"}),Object(I.jsx)(re.a.Cell,{children:"2021/08/18"})]})]})]})})]})})})},Nt=function(e){var t=e.loadUsers,a=Object(r.useState)(!1),n=Object(D.a)(a,2),s=n[0],i=n[1],c=Object(r.useState)({fields:{ids:["firstName","lastName","email","phone","role"],entities:{firstName:{error:null,value:""},lastName:{error:null,value:""},email:{error:null,value:""},phone:{error:null,value:""},role:{error:null,value:""}}}}),o=Object(D.a)(c,2),u=o[0],j=o[1],b=function(e){var t=e.target.name,a=e.target.value;j((function(e){return{fields:Object(l.a)(Object(l.a)({},e.fields),{},{entities:Object(l.a)(Object(l.a)({},e.fields.entities),{},Object(we.a)({},t,Object(l.a)(Object(l.a)({},e.fields.entities[t]),{},{value:a})))})}}))},m=function(){j({fields:{ids:["firstName","lastName","email","phone","role"],entities:{firstName:{error:null,value:""},lastName:{error:null,value:""},email:{error:null,value:""},phone:{error:null,value:""},role:{error:null,value:""}}}})},A=function(){var e=!0;u.fields.entities.firstName.value||(h("Please provide a first name","firstName"),e=!1),u.fields.entities.lastName.value||(h("Please provide a lastName","lastName"),e=!1);/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,20}$/.test(u.fields.entities.email.value)||(h("Please provide a valid email address","email"),e=!1);return/^[0-9]+$/.test(u.fields.entities.phone.value)||(h("Please use numbers only","phone"),e=!1),10!==u.fields.entities.phone.value.length&&(h("Please provide an 10 digit phone number","phone"),e=!1),u.fields.entities.role.value||(h("Please provide a role","role"),e=!1),e},h=function(e,t){j((function(a){return{fields:Object(l.a)(Object(l.a)({},a.fields),{},{entities:Object(l.a)(Object(l.a)({},a.fields.entities),{},Object(we.a)({},t,Object(l.a)(Object(l.a)({},a.fields.entities[t]),{},{error:e})))})}}))},f=function(){var e=Object(P.a)(S.a.mark((function e(){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(!0),a={firstName:u.fields.entities.firstName.value,lastName:u.fields.entities.lastName.value,email:u.fields.entities.email.value,phone:u.fields.entities.phone.value,role:u.fields.entities.role.value,f_clientId:1,active:!0},console.log("user: ",a),d.register(a).then((function(e){console.log("response: ",e),"success"===e.status?(i(!1),m(),jt.success("Success","User registered successfully"),t()):"duplicate"===e.status?(i(!1),jt.error("Error","User already exists. Please use a different username (email).")):(i(!1),jt.warning("Warning","Something went wrong"))})).catch((function(e){i(!1),jt.error("Warning","Something went majorly wrong")}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(I.jsxs)(C.a,{className:"user",children:[s&&Object(I.jsx)(se.a,{active:!0,inverted:!0,children:Object(I.jsx)(ie.a,{})}),Object(I.jsxs)(Ce.a,{children:[Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{error:u.fields.entities.firstName.error,id:"form-input-control-firstName",name:"firstName",label:"First Name",onChange:b,required:!0,type:"text",value:u.fields.entities.firstName.value}),Object(I.jsx)(Ce.a.Input,{error:u.fields.entities.lastName.error,id:"form-input-control-lastName",name:"lastName",label:"Surname",onChange:b,required:!0,type:"text",value:u.fields.entities.lastName.value}),Object(I.jsx)(Ce.a.Input,{error:u.fields.entities.email.error,id:"form-input-control-email",name:"email",label:"Email",onChange:b,required:!0,type:"email",value:u.fields.entities.email.value})]}),Object(I.jsxs)(Ce.a.Group,{widths:"equal",children:[Object(I.jsx)(Ce.a.Input,{error:u.fields.entities.phone.error,id:"form-input-control-phone",name:"phone",label:"Phone",onChange:b,required:!0,type:"text",value:u.fields.entities.phone.value}),Object(I.jsx)(Ce.a.Select,{error:u.fields.entities.role.error,id:"form-select-control-role",name:"role",label:"Role",onChange:function(e,t){var a=t.name,n=t.value;j((function(e){return{fields:Object(l.a)(Object(l.a)({},e.fields),{},{entities:Object(l.a)(Object(l.a)({},e.fields.entities),{},Object(we.a)({},a,Object(l.a)(Object(l.a)({},e.fields.entities[a]),{},{value:n})))})}}))},options:[{key:1,text:"Admin",value:"Admin"},{key:2,text:"Agent",value:"Agent"},{key:3,text:"KAM",value:"Kam"}],required:!0,value:u.fields.entities.role.value})]}),Object(I.jsxs)(ce.a.Group,{size:"large",children:[Object(I.jsx)(ce.a,{color:"teal",content:"Submit",onClick:function(e){e.preventDefault(),u.fields.ids.forEach((function(e){j((function(t){return{fields:Object(l.a)(Object(l.a)({},t.fields),{},{entities:Object(l.a)(Object(l.a)({},t.fields.entities),{},Object(we.a)({},e,Object(l.a)(Object(l.a)({},t.fields.entities[e]),{},{error:null})))})}}))})),A()&&f()}}),Object(I.jsx)(ce.a.Or,{}),Object(I.jsx)(ce.a,{content:"Clear",onClick:function(e){e.preventDefault(),m()}})]})]})]})},wt=function(e){var t=e.loadUsers,a=e.users,n=d.userValue,r=function(){var e=Object(P.a)(S.a.mark((function e(a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.deactivateUser(a).then((function(e){"success"===e.status?(jt.success("Success","User was successfully deactivated"),t()):jt.error("Error","User was not deactivated")}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(P.a)(S.a.mark((function e(a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.reactivateUser(a).then((function(e){"success"===e.status?(jt.success("Success","User was successfully reactivated"),t()):jt.error("Error","User was not reactivated")}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(P.a)(S.a.mark((function e(a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.resendInvitation(a).then((function(e){"success"===e.status?(jt.success("Success","Invitation was successfully sent"),t()):jt.error("Error","Invitation was unsuccessfully sent")}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(e,t){var a=e.id;return e.email===n.email?Object(I.jsx)(re.a.Cell,{textAlign:"center",children:Object(I.jsx)(He.a,{name:"dont"})},t):e.isVerified&&!0===e.active?Object(I.jsx)(re.a.Cell,{textAlign:"center",children:Object(I.jsx)(ce.a,{negative:!0,onClick:function(){return r(a)},children:"Deactivate"})},t):e.isVerified&&!1===e.active?Object(I.jsx)(re.a.Cell,{textAlign:"center",children:Object(I.jsx)(ce.a,{positive:!0,onClick:function(){return s(a)},children:"Reactivate"})},t):e.isVerified?void 0:Object(I.jsx)(re.a.Cell,{textAlign:"center",children:Object(I.jsx)(ce.a,{primary:!0,onClick:function(){return i(a)},children:"Resend invitation"})},t)},l=a.map((function(e,t){return"Super"!==e.role?Object(I.jsxs)(re.a.Row,{children:[Object(I.jsx)(re.a.Cell,{children:e.email},t+1),Object(I.jsx)(re.a.Cell,{children:e.firstName},t+2),Object(I.jsx)(re.a.Cell,{children:e.lastName},t+3),Object(I.jsx)(re.a.Cell,{children:e.role},t+4),Object(I.jsx)(re.a.Cell,{textAlign:"center",children:(a=e.isVerified,a?Object(I.jsx)("img",{src:Ot,alt:"Green tick",width:"55",height:"45"}):Object(I.jsx)("img",{src:"data:image/png;base64,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",alt:"Red cross",width:"40",height:"30"}))},t+5),c(e,t+6)]},t):null;var a}));return Object(I.jsx)(C.a,{children:Object(I.jsxs)(re.a,{className:"userAdmin",celled:!0,selectable:!0,children:[Object(I.jsx)(re.a.Header,{children:Object(I.jsxs)(re.a.Row,{children:[Object(I.jsx)(re.a.HeaderCell,{children:"Username"}),Object(I.jsx)(re.a.HeaderCell,{children:"First Name"}),Object(I.jsx)(re.a.HeaderCell,{children:"Surname"}),Object(I.jsx)(re.a.HeaderCell,{children:"Role"}),Object(I.jsx)(re.a.HeaderCell,{textAlign:"center",children:"Verified"}),Object(I.jsx)(re.a.HeaderCell,{textAlign:"center",children:"Action"})]})}),Object(I.jsx)(re.a.Body,{children:l})]})})},Dt=function(e){var t,a=Object(r.useState)(null),n=Object(D.a)(a,2),s=n[0],i=n[1],c=Object(r.useState)("idle"),l=Object(D.a)(c,2),o=l[0],u=l[1];function j(){return b.apply(this,arguments)}function b(){return(b=Object(P.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("loading"),e.t0=i,e.next=4,d.getAll();case 4:e.t1=e.sent,(0,e.t0)(e.t1),u("succeeded");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(r.useEffect)((function(){"idle"===o&&j()}),[o]),"loading"===o?t=Object(I.jsx)(C.a,{className:"loader",children:"Loading..."}):"succeeded"===o?t=Object(I.jsxs)(C.a,{children:[Object(I.jsx)(le.a,{children:"User Admininistration"}),Object(I.jsx)(Nt,{loadUsers:j}),Object(I.jsx)(wt,{users:s,loadUsers:j})]}):"error"===o&&(t=Object(I.jsx)(C.a,{children:"userError"})),Object(I.jsx)(C.a,{children:t})},kt=function(e){return Object(I.jsx)(C.a,{children:Object(I.jsxs)(Be.a,{error:!0,icon:!0,size:"massive",children:[Object(I.jsx)(He.a,{name:"warning sign"}),Object(I.jsxs)(Be.a.Content,{children:[Object(I.jsx)(Be.a.Header,{children:"Page not found"}),"Please try a different page"]})]})})},St=function(){return Object(I.jsx)(C.a,{fluid:!0,className:"RouteDetermination",children:Object(I.jsxs)(i.d,{children:[Object(I.jsx)(N,{path:"/dashboard",exact:!0,component:ne}),Object(I.jsx)(N,{path:"/upload",roles:[x.Admin,x.Super],exact:!0,component:gt}),Object(I.jsx)(N,{path:"/collections",exact:!0,component:xe}),Object(I.jsx)(N,{path:"/collection/:id",exact:!0,component:Le}),Object(I.jsx)(N,{path:"/reports",exact:!0,component:It}),Object(I.jsx)(N,{path:"/release",exact:!0,roles:[x.Admin,x.Super],component:yt}),Object(I.jsx)(N,{path:"/users",exact:!0,roles:[x.Admin,x.Super],component:Dt}),Object(I.jsx)(N,{path:"/customers",exact:!0,roles:[x.Super],component:Ye}),Object(I.jsx)(N,{path:"/customers/create",exact:!0,roles:[x.Super],component:Qe}),Object(I.jsx)(N,{path:"/customers/:id",exact:!0,roles:[x.Super],component:qe}),Object(I.jsx)(N,{path:"/clients",exact:!0,roles:[x.Super],component:tt}),Object(I.jsx)(N,{path:"/clients/create",exact:!0,roles:[x.Super],component:_e}),Object(I.jsx)(N,{path:"/clients/:id",exact:!0,roles:[x.Super],component:$e}),Object(I.jsx)(N,{exact:!0,path:"/not-found",component:kt}),Object(I.jsx)(i.a,{to:"/not-found"})]})})},Pt=a(346),Rt=a(738),Tt=a(227),Et=a.p+"static/media/collections_demo.526cf99d.png",Vt=Object(Pt.createMedia)({breakpoints:{mobile:0,tablet:768,computer:1024}}),Ft=Vt.MediaContextProvider,Mt=Vt.Media,zt=function(e){var t=e.mobile;return Object(I.jsxs)(C.a,{text:!0,children:[Object(I.jsx)(le.a,{as:"h1",content:"The System",inverted:!0,style:{fontSize:t?"2em":"4em",fontWeight:"normal",marginBottom:0,marginTop:t?"1.5em":"3em"}}),Object(I.jsx)(le.a,{as:"h2",content:"We are here to make your collections easier",inverted:!0,style:{fontSize:t?"1.5em":"1.7em",fontWeight:"normal",marginTop:t?"0.5em":"1.5em"}}),Object(I.jsxs)(ce.a,{primary:!0,size:"huge",children:["Get Started",Object(I.jsx)(He.a,{name:"right arrow"})]})]})},Lt=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.hideFixedMenu=function(){return e.setState({fixed:!1})},e.showFixedMenu=function(){return e.setState({fixed:!0})},e}return Object(T.a)(a,[{key:"render",value:function(){var e=this.props.children;return Object(I.jsxs)(Mt,{greaterThan:"mobile",children:[Object(I.jsx)(Rt.a,{once:!1,onBottomPassed:this.showFixedMenu,onBottomPassedReverse:this.hideFixedMenu,children:Object(I.jsx)(J.a,{inverted:!0,textAlign:"center",style:{minHeight:700,padding:"1em 0em"},vertical:!0,children:Object(I.jsx)(zt,{})})}),e]})}}]),a}(r.Component),Bt=function(e){Object(E.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleSidebarHide=function(){return e.setState({sidebarOpened:!1})},e.handleToggle=function(){return e.setState({sidebarOpened:!0})},e}return Object(T.a)(a,[{key:"render",value:function(){var e=this.props.children;return Object(I.jsxs)(Mt,{as:Ct.a.Pushable,at:"mobile",children:[Object(I.jsx)(J.a,{inverted:!0,textAlign:"center",style:{minHeight:350,padding:"1em 0em"},vertical:!0,children:Object(I.jsx)(zt,{mobile:!0})}),e]})}}]),a}(r.Component),Ht=function(e){var t=e.children;return Object(I.jsxs)(Ft,{children:[Object(I.jsx)(Lt,{children:t}),Object(I.jsx)(Bt,{children:t})]})},Ut=function(){return Object(I.jsxs)(Ht,{children:[Object(I.jsx)(J.a,{id:"#more",style:{padding:"8em 0em"},vertical:!0,children:Object(I.jsxs)(w.a,{container:!0,stackable:!0,verticalAlign:"middle",children:[Object(I.jsxs)(w.a.Row,{children:[Object(I.jsxs)(w.a.Column,{width:8,children:[Object(I.jsx)(le.a,{as:"h3",style:{fontSize:"2em"},children:"We help companies collect their debt"}),Object(I.jsx)("p",{style:{fontSize:"1.33em"},children:"We know how much your customers mean to you, even the ones who struggle to pay on time. Let us take care of the stress of collecting what is owed to you so you can focus on your business."})]}),Object(I.jsx)(w.a.Column,{floated:"right",width:6,children:Object(I.jsx)(Tt.a,{bordered:!0,rounded:!0,size:"large",src:Et})})]}),Object(I.jsx)(w.a.Row,{children:Object(I.jsx)(w.a.Column,{textAlign:"center",children:Object(I.jsx)(ce.a,{size:"huge",children:"Screenshots"})})})]})}),Object(I.jsx)(J.a,{style:{padding:"8em 0em"},vertical:!0,children:Object(I.jsxs)(C.a,{textAlign:"center",children:[Object(I.jsx)(le.a,{as:"h3",style:{fontSize:"2em"},children:"How can we help you?"}),Object(I.jsx)("p",{style:{fontSize:"1.33em"},children:"Our aim is to provide a service that reduces stress in your business life. Few things are more stressful than having to collect money. We have designed a system to make this as simple as possible for you. Or, if you want us to help even further, allow our call centre team to handle the entire process."}),Object(I.jsx)(w.a,{divided:!0,stackable:!0,children:Object(I.jsxs)(w.a.Row,{children:[Object(I.jsxs)(w.a.Column,{width:5,children:[Object(I.jsx)(le.a,{as:"h4",children:"The System"}),Object(I.jsx)(He.a,{color:"grey",name:"desktop",size:"huge"}),Object(I.jsx)("p",{children:"Use The System to handle all your collections activites. This includes uploading existing accounts, taking each account through the workflow engine and drawing reports."})]}),Object(I.jsxs)(w.a.Column,{width:5,children:[Object(I.jsx)(le.a,{as:"h4",children:"Call Centre"}),Object(I.jsx)(He.a,{color:"grey",name:"phone",size:"huge"}),Object(I.jsx)("p",{children:"Our professional call centre agents will follow up on your outstanding accounts for you. With daily updates and your own client dashboard (coming soon) you are always in control."})]}),Object(I.jsxs)(w.a.Column,{width:5,children:[Object(I.jsx)(le.a,{as:"h4",children:"Best of Both Worlds"}),Object(I.jsx)(He.a,{color:"grey",name:"smile outline",size:"huge"}),Object(I.jsx)("p",{children:"Any accounts that you don't want to handle yourself can be assigned to our call centre team instead (coming soon)."})]})]})})]})}),Object(I.jsx)(J.a,{inverted:!0,vertical:!0,style:{padding:"5em 0em"},children:Object(I.jsx)(C.a,{children:Object(I.jsx)(w.a,{divided:!0,inverted:!0,stackable:!0,children:Object(I.jsxs)(w.a.Row,{children:[Object(I.jsxs)(w.a.Column,{width:3,children:[Object(I.jsx)(le.a,{inverted:!0,as:"h4",content:"About"}),Object(I.jsxs)(Z.a,{link:!0,inverted:!0,children:[Object(I.jsx)(Z.a.Item,{as:"a",children:"Sitemap"}),Object(I.jsx)(Z.a.Item,{as:"a",children:"Contact Us"})]})]}),Object(I.jsxs)(w.a.Column,{width:3,children:[Object(I.jsx)(le.a,{inverted:!0,as:"h4",content:"Services"}),Object(I.jsx)(Z.a,{link:!0,inverted:!0,children:Object(I.jsx)(Z.a.Item,{as:"a",children:"Debt Collection"})})]}),Object(I.jsxs)(w.a.Column,{width:7,children:[Object(I.jsx)(le.a,{as:"h4",inverted:!0,children:"Footer Header"}),Object(I.jsx)("p",{children:"Extra space for a call to action inside the footer that could help re-engage users."})]})]})})})})]})},Yt=a(471),qt=a(228),Wt=function(e){var t=e.handleProfileClick,a=(e.open,e.setOpen,Object(r.useState)(d.userValue)),n=Object(D.a)(a,2),s=n[0],i=n[1],c=Object(r.useState)(!1),o=Object(D.a)(c,2),u=o[0],j=o[1],b=Object(r.useState)({fields:{ids:["firstName","lastName","phone","password","confirmPassword"],entities:{firstName:{error:null,value:""},lastName:{error:null,value:""},phone:{error:null,value:""},password:{error:null,isChanged:!1,value:""},confirmPassword:{error:null,value:""}}}}),m=Object(D.a)(b,2),A=m[0],h=m[1],f=Object(r.useState)(!1),p=Object(D.a)(f,2),O=p[0],g=p[1];Object(r.useEffect)((function(){var e=A.fields.entities;e.firstName.value=s.firstName,e.lastName.value=s.lastName,e.phone.value=s.phone}),[]);var x=function(e){var t=e.target.name,a=e.target.value;h((function(e){return{fields:Object(l.a)(Object(l.a)({},e.fields),{},{entities:Object(l.a)(Object(l.a)({},e.fields.entities),{},Object(we.a)({},t,Object(l.a)(Object(l.a)({},e.fields.entities[t]),{},{value:a})))})}}))},v=function(e){g(!0);var t=e.target.value,a=A.fields.entities.password;a.isChanged=!0,a.value=t,h(Object(l.a)(Object(l.a)({},A),{},{password:a}))},y=function(e){e.preventDefault(),e.stopPropagation(),N(),t(!1)},N=function(){h({fields:{ids:["firstName","lastName","phone","password","confirmPassword"],entities:{firstName:{error:null,value:s.firstName},lastName:{error:null,value:s.lastName},phone:{error:null,value:s.phone},password:{error:null,value:""},confirmPassword:{error:null,value:""}}}})},w=function(e){e.preventDefault(),A.fields.ids.forEach((function(e){h((function(t){return{fields:Object(l.a)(Object(l.a)({},t.fields),{},{entities:Object(l.a)(Object(l.a)({},t.fields.entities),{},Object(we.a)({},e,Object(l.a)(Object(l.a)({},t.fields.entities[e]),{},{error:null})))})}}))})),k()&&T()},k=function(){var e=!0;A.fields.entities.firstName.value||(R("Please provide a first name","firstName"),e=!1),A.fields.entities.lastName.value||(R("Please provide a lastName","lastName"),e=!1);return/^[0-9]+$/.test(A.fields.entities.phone.value)||(R("Please use numbers only","phone"),e=!1),10!==A.fields.entities.phone.value.length&&(R("Please provide an 10 digit phone number","phone"),e=!1),O&&(A.fields.entities.password.value.length<8&&(R("Please provide a password of at least 8 characters","password"),e=!1),A.fields.entities.confirmPassword.value!==A.fields.entities.password.value&&(R("Passwords do not match","confirmPassword"),e=!1),A.fields.entities.confirmPassword.value||(R("Please confirm your password","confirmPassword"),e=!1)),e},R=function(e,t){h((function(a){return{fields:Object(l.a)(Object(l.a)({},a.fields),{},{entities:Object(l.a)(Object(l.a)({},a.fields.entities),{},Object(we.a)({},t,Object(l.a)(Object(l.a)({},a.fields.entities[t]),{},{error:e})))})}}))},T=function(){var e=Object(P.a)(S.a.mark((function e(){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(!0),a=O?{firstName:A.fields.entities.firstName.value,lastName:A.fields.entities.lastName.value,phone:A.fields.entities.phone.value,password:A.fields.entities.password.value,confirmPassword:A.fields.entities.confirmPassword.value,f_clientId:1,active:!0}:{firstName:A.fields.entities.firstName.value,lastName:A.fields.entities.lastName.value,phone:A.fields.entities.phone.value,f_clientId:1,active:!0},d.update(s.id,a).then((function(e){j(!1),jt.success("Success","User updated successfully",{keepAfterRouteChange:!0}),t(!1),i(e),E()})).catch((function(e){j(!1),jt.error("Error",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){if(s)return Object(I.jsx)(ve.a,{children:Object(I.jsxs)(ve.a.Content,{children:[Object(I.jsx)(ve.a.Header,{children:s.email}),Object(I.jsx)(ve.a.Meta,{children:s.role}),Object(I.jsx)("br",{}),Object(I.jsx)(ve.a.Description,{children:Object(I.jsxs)(Ce.a,{children:[Object(I.jsx)(Ce.a.Input,{error:A.fields.entities.firstName.error,fluid:!0,id:"form-input-control-firstName",name:"firstName",label:"First Name",onChange:x,type:"text",value:A.fields.entities.firstName.value}),Object(I.jsx)(Ce.a.Input,{error:A.fields.entities.lastName.error,fluid:!0,id:"form-input-control-lastName",name:"lastName",label:"Surname",onChange:x,type:"text",value:A.fields.entities.lastName.value}),Object(I.jsx)(Ce.a.Input,{error:A.fields.entities.phone.error,fluid:!0,id:"form-input-control-phone",name:"phone",label:"Phone",onChange:x,type:"text",value:A.fields.entities.phone.value}),Object(I.jsx)(Ce.a.Input,{autoComplete:"new-password",error:A.fields.entities.password.error,fluid:!0,id:"form-input-control-password",name:"password",label:"Password",onChange:v,placeholder:"new-password",type:"password",value:A.fields.entities.password.value}),Object(I.jsx)(Ce.a.Input,{autoComplete:"new-password",error:A.fields.entities.confirmPassword.error,fluid:!0,id:"form-input-control-confirmPassword",name:"confirmPassword",label:"Confirm Password",onChange:x,placeholder:"new-password",type:"password",value:A.fields.entities.confirmPassword.value}),Object(I.jsx)(C.a,{textAlign:"center",children:Object(I.jsxs)(ce.a.Group,{size:"medium",children:[Object(I.jsx)(ce.a,{primary:!0,content:"Update",onClick:w}),Object(I.jsx)(ce.a.Or,{}),Object(I.jsx)(ce.a,{content:"Close",onClick:y})]})})]})})]})})};return Object(I.jsxs)(I.Fragment,{children:[u&&Object(I.jsx)(se.a,{active:!0,inverted:!0,children:Object(I.jsx)(ie.a,{})}),E()]})},Gt=function(){var e=Object(r.useState)(null),t=Object(D.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(null),i=Object(D.a)(s,2),c=i[0],l=i[1],o=Object(r.useState)(!1),u=Object(D.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(!1),A=Object(D.a)(m,2),h=A[0],f=(A[1],Object(r.useState)(!1)),p=Object(D.a)(f,2),O=p[0],v=p[1],y=Object(Pt.createMedia)({breakpoints:{mobile:0,tablet:768,computer:992,largeScreen:1200,widescreen:1920}}),N=y.createMediaStyle(),w=y.Media,k=y.MediaContextProvider;Object(r.useEffect)((function(){l(d.userValue)}),[]);var S=function(e,t){var a=t.name;n(a),g.push("/".concat(a))},P=function(e){console.log("handleProfileClick"),b(e)},R=function(){v(!1)},T=function(){v(!0)},E=c?Object(I.jsx)(Yt.a.Item,{name:"logout",active:"logout"===a,onClick:d.logout,children:"Logout"}):Object(I.jsx)(Yt.a.Item,{name:"login",active:"login"===a,onClick:S,children:"Login"});return Object(I.jsxs)(k,{children:[Object(I.jsx)("style",{children:N}),"/"===g.location.pathname?Object(I.jsxs)("div",{children:[Object(I.jsx)(w,{greaterThan:"mobile",children:Object(I.jsx)(J.a,{inverted:!0,textAlign:"center",style:{minHeight:100,padding:"1em 0em"},vertical:!0,children:Object(I.jsx)(Yt.a,{fixed:h?"top":null,inverted:!h,pointing:!h,secondary:!h,size:"large",children:Object(I.jsxs)(C.a,{children:[Object(I.jsx)(Yt.a.Item,{as:"a",active:!0,children:"Home"}),Object(I.jsx)(Yt.a.Item,{as:"a",name:"company",active:"company"===a,onClick:S,children:"Company"}),Object(I.jsxs)(Yt.a.Item,{position:"right",children:[!c&&Object(I.jsx)(ce.a,{as:X.a,to:"/login",inverted:!h,primary:h,style:{marginLeft:"0.5em"},children:"Log in"}),c&&Object(I.jsx)(ce.a,{as:X.a,to:"/dashboard",inverted:!h,primary:h,style:{marginLeft:"0.5em"},children:"Dashboard"})]})]})})})}),Object(I.jsx)(w,{at:"mobile",children:Object(I.jsx)(C.a,{as:Ct.a.Pushable,at:"mobile",className:"mobile-navbar-home",children:Object(I.jsxs)(Ct.a.Pushable,{children:[Object(I.jsxs)(Ct.a,{as:Yt.a,animation:"overlay",className:"mobile-navbar-home",inverted:!0,onHide:R,vertical:!0,visible:O,children:[Object(I.jsx)(Yt.a.Item,{as:"a",active:!0,children:"Home"}),Object(I.jsx)(Yt.a.Item,{as:"a",children:"Company"}),!c&&Object(I.jsx)(Yt.a.Item,{as:"a",name:"login",active:"login"===a,onClick:S,children:"Log in"}),c&&Object(I.jsx)(Yt.a.Item,{as:"a",children:"Dashboard"})]}),Object(I.jsx)(Ct.a.Pusher,{dimmed:O,children:Object(I.jsx)(J.a,{inverted:!0,textAlign:"center",style:{minHeight:50,padding:"1em 0em"},vertical:!0,children:Object(I.jsx)(C.a,{children:Object(I.jsxs)(Yt.a,{inverted:!0,pointing:!0,secondary:!0,size:"large",children:[Object(I.jsx)(Yt.a.Item,{onClick:T,children:Object(I.jsx)(He.a,{name:"sidebar"})}),Object(I.jsxs)(Yt.a.Item,{position:"right",children:[!c&&Object(I.jsx)(ce.a,{as:X.a,to:"/login",inverted:!0,children:"Log in"}),c&&Object(I.jsx)(ce.a,{as:X.a,to:"/dashboard",inverted:!0,children:"Dashboard"})]})]})})})})]})})})]}):"/login"===g.location.pathname?Object(I.jsxs)("div",{children:[Object(I.jsx)(w,{greaterThan:"mobile",children:Object(I.jsx)(J.a,{inverted:!0,textAlign:"center",style:{minHeight:100,padding:"1em 0em"},vertical:!0,children:Object(I.jsx)(Yt.a,{fixed:h?"top":null,inverted:!h,pointing:!h,secondary:!h,size:"large",children:Object(I.jsxs)(C.a,{children:[Object(I.jsx)(Yt.a.Item,{as:"a",active:!0,children:"Home"}),Object(I.jsx)(Yt.a.Item,{as:"a",children:"Company"}),Object(I.jsx)(Yt.a.Item,{position:"right",children:Object(I.jsx)(ce.a,{as:X.a,to:"/dashboard",inverted:!h,primary:h,style:{marginLeft:"0.5em"},children:"Stuff to come here"})})]})})})}),Object(I.jsx)(w,{at:"mobile",children:Object(I.jsx)(C.a,{as:Ct.a.Pushable,at:"mobile",children:Object(I.jsxs)(Ct.a.Pushable,{children:[Object(I.jsxs)(Ct.a,{as:Yt.a,animation:"overlay",onHide:R,vertical:!0,visible:O,children:[Object(I.jsx)(Yt.a.Item,{as:"a",active:!0,children:"Home"}),Object(I.jsx)(Yt.a.Item,{as:"a",children:"Company"}),Object(I.jsx)(Yt.a.Item,{as:"a",children:"Stuff to come here"})]}),Object(I.jsx)(Ct.a.Pusher,{dimmed:O,children:Object(I.jsx)(J.a,{textAlign:"center",style:{minHeight:50,padding:"1em 0em"},vertical:!0,children:Object(I.jsx)(C.a,{children:Object(I.jsxs)(Yt.a,{pointing:!0,secondary:!0,size:"large",children:[Object(I.jsx)(Yt.a.Item,{onClick:T,children:Object(I.jsx)(He.a,{name:"sidebar"})}),Object(I.jsx)(Yt.a.Item,{position:"right",children:Object(I.jsx)(ce.a,{as:X.a,to:"/dashboard",children:"Stuff to come here"})})]})})})})]})})})]}):Object(I.jsxs)("div",{children:[Object(I.jsx)(w,{greaterThan:"mobile",children:Object(I.jsxs)(I.Fragment,{children:[c&&Object(I.jsxs)(Yt.a,{stackable:!0,fixed:"top",inverted:!0,children:[Object(I.jsx)(X.a,{to:"/",children:Object(I.jsx)(Yt.a.Item,{children:Object(I.jsx)("img",{src:"https://react.semantic-ui.com/logo.png",alt:"menu logo"})})}),Object(I.jsx)(Yt.a.Item,{name:"dashboard",active:"dashboard"===a,onClick:S,children:"Dashboard"}),Object(I.jsx)(Yt.a.Item,{name:"collections",active:"collections"===a,onClick:S,children:"Collections"}),[x.Super].includes(c.role)&&Object(I.jsx)(Yt.a.Item,{name:"customers",active:"customers"===a,onClick:S,children:"Customers"}),Object(I.jsx)(Yt.a.Item,{name:"reports",active:"reports"===a,onClick:S,children:"Reports"}),Object(I.jsx)(Yt.a.Item,{name:"upload",active:"upload"===a,onClick:S,children:"Upload"}),[x.Admin,x.Super].includes(c.role)&&Object(I.jsx)(Yt.a.Item,{name:"users",active:"users"===a,onClick:S,children:"User Admin"}),c.role===x.Super&&Object(I.jsx)(qt.a,{item:!0,text:"Client Admin",children:Object(I.jsxs)(qt.a.Menu,{children:[Object(I.jsx)(qt.a.Item,{name:"addclient",active:"clients"===a,onClick:S,children:"Add Client"}),Object(I.jsx)(qt.a.Item,{name:"editclient",active:"clients"===a,onClick:S,children:"Edit Client"})]})}),Object(I.jsxs)(Yt.a.Menu,{position:"right",children:[[x.Admin,x.Super].includes(c.role)&&Object(I.jsx)(Yt.a.Item,{name:"release",active:"release"===a,onClick:S,children:"Release Notes & Bugs"}),Object(I.jsx)(Yt.a.Item,{children:Object(I.jsx)(qt.a,{className:"icon",icon:"user",labeled:!0,onClick:function(){return P(!0)},open:j,text:c.firstName,children:Object(I.jsx)(qt.a.Menu,{children:Object(I.jsx)(qt.a.Item,{children:Object(I.jsx)(Wt,{handleProfileClick:P,open:j,setOpen:b})})})})}),E]})]}),!c&&Object(I.jsxs)(Yt.a,{stackable:!0,fixed:"top",inverted:!0,children:[Object(I.jsx)(X.a,{to:"/",children:Object(I.jsx)(Yt.a.Item,{children:Object(I.jsx)("img",{src:"https://react.semantic-ui.com/logo.png",alt:"menu logo"})})}),Object(I.jsx)(Yt.a.Item,{name:"ptp",active:"ptp"===a,onClick:S,children:"Promise To Pay"}),Object(I.jsx)(Yt.a.Item,{name:"dispute",active:"dispute"===a,onClick:S,children:"Dispute"})]})]})}),Object(I.jsx)(w,{at:"mobile",children:Object(I.jsxs)(I.Fragment,{children:[c&&Object(I.jsx)(C.a,{as:Ct.a.Pushable,at:"mobile",children:Object(I.jsxs)(Ct.a.Pushable,{children:[Object(I.jsxs)(Ct.a,{as:Yt.a,animation:"overlay",inverted:!0,onHide:R,vertical:!0,visible:O,children:[Object(I.jsx)(Yt.a.Item,{name:"dashboard",active:"dashboard"===a,onClick:S,children:"Dashboard"}),Object(I.jsx)(Yt.a.Item,{name:"collections",active:"collections"===a,onClick:S,children:"Collections"}),[x.Super].includes(c.role)&&Object(I.jsx)(Yt.a.Item,{name:"customers",active:"customers"===a,onClick:S,children:"Customers"}),Object(I.jsx)(Yt.a.Item,{name:"reports",active:"reports"===a,onClick:S,children:"Reports"}),Object(I.jsx)(Yt.a.Item,{name:"upload",active:"upload"===a,onClick:S,children:"Upload"}),[x.Admin,x.Super].includes(c.role)&&Object(I.jsx)(Yt.a.Item,{name:"users",active:"users"===a,onClick:S,children:"User Admin"}),c.role===x.Super&&Object(I.jsx)(qt.a,{item:!0,text:"Client Admin",children:Object(I.jsxs)(qt.a.Menu,{children:[Object(I.jsx)(qt.a.Item,{name:"addclient",active:"clients"===a,onClick:S,children:"Add Client"}),Object(I.jsx)(qt.a.Item,{name:"editclient",active:"clients"===a,onClick:S,children:"Edit Client"})]})}),[x.Admin,x.Super].includes(c.role)&&Object(I.jsx)(Yt.a.Item,{name:"release",active:"release"===a,onClick:S,children:"Release Notes & Bugs"}),Object(I.jsx)(Yt.a.Item,{children:Object(I.jsx)(qt.a,{className:"icon",icon:"user",labeled:!0,onClick:function(){return P(!0)},open:j,text:c.firstName,children:Object(I.jsx)(qt.a.Menu,{children:Object(I.jsx)(qt.a.Item,{children:Object(I.jsx)(Wt,{handleProfileClick:P,open:j,setOpen:b})})})})}),E]}),Object(I.jsx)(Ct.a.Pusher,{dimmed:O,children:Object(I.jsx)(J.a,{inverted:!0,textAlign:"center",style:{minHeight:50,padding:"1em 0em"},vertical:!0,children:Object(I.jsx)(C.a,{children:Object(I.jsxs)(Yt.a,{inverted:!0,pointing:!0,secondary:!0,size:"large",children:[Object(I.jsx)(Yt.a.Item,{onClick:T,children:Object(I.jsx)(He.a,{name:"sidebar"})}),Object(I.jsx)(Yt.a.Item,{position:"right",children:Object(I.jsx)(ce.a,{as:X.a,to:"/dashboard",inverted:!0,children:"Stuff to come here"})})]})})})})]})}),!c&&Object(I.jsx)(C.a,{as:Ct.a.Pushable,at:"mobile",children:Object(I.jsxs)(Ct.a.Pushable,{children:[Object(I.jsxs)(Ct.a,{as:Yt.a,animation:"overlay",inverted:!0,onHide:R,vertical:!0,visible:O,children:[Object(I.jsx)(Yt.a.Item,{as:"a",active:!0,children:"Promise To Pay"}),Object(I.jsx)(Yt.a.Item,{as:"a",children:"Dispute"}),Object(I.jsx)(Yt.a.Item,{as:"a",children:"Stuff to come here"})]}),Object(I.jsx)(Ct.a.Pusher,{dimmed:O,children:Object(I.jsx)(J.a,{inverted:!0,textAlign:"center",style:{minHeight:50,padding:"1em 0em"},vertical:!0,children:Object(I.jsx)(C.a,{children:Object(I.jsxs)(Yt.a,{inverted:!0,pointing:!0,secondary:!0,size:"large",children:[Object(I.jsx)(Yt.a.Item,{onClick:T,children:Object(I.jsx)(He.a,{name:"sidebar"})}),Object(I.jsx)(Yt.a.Item,{position:"right",children:Object(I.jsx)(ce.a,{as:X.a,to:"/stuff",inverted:!0,children:"Stuff to come here"})})]})})})})]})})]})})]})]})},Zt=a(226);function Kt(e){var t=e.id,a=e.fade,n=Object(r.useState)([]),s=Object(D.a)(n,2),i=s[0],c=s[1];function o(e){var t;if(e){var a=["alert","alert-dismissable"],n=(t={},Object(we.a)(t,bt,"success"),Object(we.a)(t,mt,"error"),Object(we.a)(t,At,"info"),Object(we.a)(t,ht,"warning"),t);return a.push(n[e.type]),e.fade&&a.push("fade"),a.join(" ")}}return Object(r.useEffect)((function(){var e=jt.onAlert(t).subscribe((function(e){e.message?(c((function(t){return[].concat(Object(Zt.a)(t),[e])})),e.autoClose&&setTimeout((function(){return function(e){if(a){var t=Object(l.a)(Object(l.a)({},e),{},{fade:!0});c((function(a){return a.map((function(a){return a===e?t:a}))})),setTimeout((function(){c((function(e){return e.filter((function(e){return e!==t}))}))}),250)}else c((function(t){return t.filter((function(t){return t!==e}))}))}(e)}),3e3)):c((function(e){var t=e.filter((function(e){return e.keepAfterRouteChange}));return t.forEach((function(e){return delete e.keepAfterRouteChange})),t}))})),n=g.listen((function(e){e.pathname.endsWith("/")||jt.clear(t)}));return function(){e.unsubscribe(),n()}}),[a,t]),i.length?Object(I.jsx)(C.a,{style:{marginTop:"80px"},children:i.map((function(e,t){return Object(I.jsx)(Be.a,{className:o(e),header:e.header,content:e.message},t)}))}):null}Kt.defaultProps={id:"default-alert",fade:!0};var Jt=function(e){var t=e.history,a=e.location,n=Object(r.useState)(""),s=Object(D.a)(n,2),i=s[0],c=s[1],l=Object(r.useState)(""),o=Object(D.a)(l,2),u=o[0],j=o[1];return Object(I.jsx)(w.a,{textAlign:"center",style:{height:"80vh"},verticalAlign:"middle",children:Object(I.jsxs)(w.a.Column,{style:{maxWidth:450},children:[Object(I.jsxs)(le.a,{as:"h2",color:"teal",textAlign:"center",children:[Object(I.jsx)(He.a,{name:"user"}),"Log-in to your account"]}),Object(I.jsx)(Ce.a,{size:"large",onSubmit:function(e){e.preventDefault(),jt.clear(),d.login(i,u).then((function(){var e=(a.state||{from:{pathname:"/dashboard"}}).from;t.push(e)})).catch((function(e){jt.error("Error",e)}))},children:Object(I.jsxs)(J.a,{children:[Object(I.jsx)(Ce.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",type:"email",onChange:function(e){return function(e){c(e.target.value)}(e)}}),Object(I.jsx)(Ce.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",onChange:function(e){return function(e){j(e.target.value)}(e)}}),Object(I.jsxs)(ce.a.Group,{children:[Object(I.jsx)(ce.a,{color:"teal",content:"Login",size:"medium"}),Object(I.jsx)(ce.a.Or,{}),Object(I.jsx)(ce.a,{as:X.a,to:"/users/forgot-password",color:"teal",content:"Forgot Password",size:"medium"})]})]})})]})})};function Xt(e){var t=e.history,a={title:"Mr",firstName:"Darryll",lastName:"Robinson",email:"darryll@thesystem.co.za",phone:"0123456789",password:"newpassss",confirmPassword:"newpassss",active:!0,role:"Super"};return Object(I.jsxs)(Ce.a,{children:[Object(I.jsx)("h3",{className:"card-header",children:"Register"}),Object(I.jsxs)("div",{className:"card-body",children:[Object(I.jsxs)("div",{className:"form-row",children:[Object(I.jsxs)("div",{className:"form-group col",children:[Object(I.jsx)("label",{children:"Title"}),Object(I.jsxs)(ye.a,{name:"title",as:"select",className:"form-control",children:[Object(I.jsx)("option",{value:""}),Object(I.jsx)("option",{value:"Mr",children:"Mr"}),Object(I.jsx)("option",{value:"Mrs",children:"Mrs"}),Object(I.jsx)("option",{value:"Miss",children:"Miss"}),Object(I.jsx)("option",{value:"Ms",children:"Ms"})]})]}),Object(I.jsxs)("div",{className:"form-group col-5",children:[Object(I.jsx)("label",{children:"First Name"}),Object(I.jsx)(ye.a,{name:"firstName",type:"text",className:"form-control"})]}),Object(I.jsxs)("div",{className:"form-group col-5",children:[Object(I.jsx)("label",{children:"Last Name"}),Object(I.jsx)(ye.a,{name:"lastName",type:"text",className:"form-control"})]})]}),Object(I.jsxs)("div",{className:"form-group",children:[Object(I.jsx)("label",{children:"Email"}),Object(I.jsx)(ye.a,{name:"email",type:"text",className:"form-control"}),Object(I.jsx)("label",{children:"Phone"}),Object(I.jsx)(ye.a,{name:"phone",type:"text",className:"form-control"})]}),Object(I.jsxs)("div",{className:"form-row",children:[Object(I.jsxs)("div",{className:"form-group col",children:[Object(I.jsx)("label",{children:"Password"}),Object(I.jsx)(ye.a,{name:"password",type:"password",className:"form-control"})]}),Object(I.jsxs)("div",{className:"form-group col",children:[Object(I.jsx)("label",{children:"Confirm Password"}),Object(I.jsx)(ye.a,{name:"confirmPassword",type:"password",className:"form-control"})]})]}),Object(I.jsxs)("div",{className:"form-group form-check",children:[Object(I.jsx)(ye.a,{type:"checkbox",name:"acceptTerms",id:"acceptTerms",className:"form-check-input "}),Object(I.jsx)("label",{htmlFor:"acceptTerms",className:"form-check-label",children:"Accept Terms & Conditions"})]}),Object(I.jsxs)("div",{className:"form-group",children:[Object(I.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(){d.register(a).then((function(){t.push("/login")})).catch((function(e){console.log(e)}))},children:"Register"}),Object(I.jsx)(X.a,{to:"login",className:"btn btn-link",children:"Cancel"})]})]})]})}function Qt(){var e=Object(r.useState)(""),t=Object(D.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(null),i=Object(D.a)(s,2),c=i[0],l=i[1],o=Object(r.useState)(!1),u=Object(D.a)(o,2),j=u[0],b=u[1];return Object(I.jsx)(w.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(I.jsxs)(w.a.Column,{style:{maxWidth:450},children:[Object(I.jsx)(le.a,{as:"h2",textAlign:"center",children:"Forgot Password"}),j&&Object(I.jsx)(se.a,{active:!0,inverted:!0,children:Object(I.jsx)(ie.a,{})}),Object(I.jsx)(Ce.a,{size:"large",onSubmit:function(e){e.preventDefault(),jt.clear(),a?(b(!0),d.forgotPassword(a).then((function(e){b(!1),"ok"===e.status?(n(""),jt.success("Success",e.message)):"failed"===e.status&&jt.warn("Warning",e.message)})).catch((function(e){b(!1),jt.error("Error",e)}))):l("Please enter a valid email address")},children:Object(I.jsxs)(J.a,{children:[Object(I.jsx)(Ce.a.Input,{error:c,fluid:!0,icon:"user",iconPosition:"left",placeholder:"Email address",type:"email",onChange:function(e){l(null),n(e.target.value)},value:a}),Object(I.jsx)("br",{}),Object(I.jsx)(C.a,{fluid:!0,textAlign:"center",children:Object(I.jsxs)(ce.a.Group,{children:[Object(I.jsx)(ce.a,{color:"teal",content:"Reset Password",size:"medium"}),Object(I.jsx)(ce.a.Or,{}),Object(I.jsx)(ce.a,{as:X.a,to:"/login",color:"teal",content:"Login",size:"medium"})]})})]})})]})})}var _t=a(204),$t=a.n(_t);function ea(e){var t=e.history,a="Validating",n="Valid",s="Invalid",i=Object(r.useState)(null),c=Object(D.a)(i,2),l=c[0],o=c[1],u=Object(r.useState)(a),j=Object(D.a)(u,2),b=j[0],m=j[1],A=Object(r.useState)(null),h=Object(D.a)(A,2),f=h[0],p=h[1],O=Object(r.useState)(null),g=Object(D.a)(O,2),x=g[0],v=g[1],y=Object(r.useState)(null),N=Object(D.a)(y,2),k=N[0],S=N[1],P=Object(r.useState)(null),R=Object(D.a)(P,2),T=R[0],E=R[1];Object(r.useEffect)((function(){var e=$t.a.parse(window.location.search).token;t.replace(window.location.pathname),d.validateResetToken(e).then((function(){o(e),m(n)})).catch((function(){m(s)}))}),[t,s,n]);var V=function(e){var t=e.target.value;p(t)},F=function(e){var t=e.target.value;S(t)},M=function(e){e.preventDefault(),console.log("2"),v(null),console.log("3"),E(null),function(){var e=!0;return f.length<8&&(v("Please provide a password of at least 8 characters"),e=!1),k!==f&&(E("Passwords do not match"),e=!1),k||(E("Please confirm your password"),e=!1),e}()&&(jt.clear(),d.resetPassword({token:l,password:f,confirmPassword:k}).then((function(){jt.success("Success","Password reset successful, you can now login",{keepAfterRouteChange:!0}),t.push("/login")})).catch((function(e){jt.error("Error",e)})))};return Object(I.jsx)(w.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(I.jsxs)(w.a.Column,{style:{maxWidth:450},children:[Object(I.jsx)(le.a,{as:"h2",textAlign:"center",children:"Reset Password"}),function(){switch(b){case n:try{return Object(I.jsx)(C.a,{children:Object(I.jsx)(Ce.a,{size:"large",children:Object(I.jsxs)(J.a,{children:[Object(I.jsx)(Ce.a.Input,{error:x,name:"password",onChange:V,placeholder:"New password",type:"password"}),Object(I.jsx)(Ce.a.Input,{error:T,name:"confirmPassword",onChange:F,placeholder:"Confirm password",type:"password"}),Object(I.jsx)(ce.a,{color:"teal",onClick:M,type:"submit",children:"Reset Password"})]})})})}catch(e){console.log("onSubmit e: ",e)}break;case s:return Object(I.jsxs)(J.a,{children:["Token validation failed, if the token has expired you can get a new one at the ",Object(I.jsx)(X.a,{to:"forgot-password",children:"forgot password"})," page."]});case a:return Object(I.jsx)(J.a,{children:"Validating token..."});default:return Object(I.jsxs)(J.a,{children:["Token validation failed, if the token has expired you can get a new one at the ",Object(I.jsx)(X.a,{to:"forgot-password",children:"forgot password"})," page."]})}}()]})})}function ta(e){var t=e.history,a="Verifying",n="Failed",s="Setting",i=Object(r.useState)(a),c=Object(D.a)(i,2),l=c[0],o=c[1],u=Object(r.useState)(null),j=Object(D.a)(u,2),b=j[0],m=j[1],A=Object(r.useState)(""),h=Object(D.a)(A,2),f=h[0],p=h[1],O=Object(r.useState)(null),g=Object(D.a)(O,2),x=g[0],C=g[1],v=Object(r.useState)(""),y=Object(D.a)(v,2),N=y[0],k=y[1],S=Object(r.useState)(null),P=Object(D.a)(S,2),R=P[0],T=P[1];Object(r.useEffect)((function(){var e=$t.a.parse(window.location.search).token;m(e),t.replace(window.location.pathname),d.verifyEmail(e).then((function(){o(s),jt.success("Success","Verification successful, please set a password")})).catch((function(){o(n)}))}),[n,s,t]);var E=function(e){var t=e.target.value;p(t)},V=function(e){var t=e.target.value;k(t)},F=function(e){e.preventDefault(),C(null),T(null),function(){var e=!0;return f.length<8&&(C("Please provide a password of at least 8 characters"),e=!1),N!==f&&(T("Passwords do not match"),e=!1),N||(T("Please confirm your password"),e=!1),e}()&&(jt.clear(),d.setNewPassword({token:b,password:f,confirmPassword:N}).then((function(){jt.success("Success","Welcome to The System",{keepAfterRouteChange:!0}),t.push("/login")})).catch((function(e){jt.error("Error",e)})))};return Object(I.jsx)(w.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(I.jsx)(w.a.Column,{style:{maxWidth:450},children:function(){switch(l){case a:return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(le.a,{as:"h2",textAlign:"center",children:"Verify Email"}),Object(I.jsx)(J.a,{children:"Verifying..."})]});case n:return Object(I.jsxs)("div",{children:["Verification failed, you can also verify your user using the"," ",Object(I.jsx)(X.a,{to:"forgot-password",children:"forgot password"})," page."]});case s:return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(le.a,{as:"h2",textAlign:"center",children:"Set Password"}),Object(I.jsx)(Ce.a,{size:"large",children:Object(I.jsxs)(J.a,{children:[Object(I.jsx)(Ce.a.Input,{error:x,name:"password",onChange:E,placeholder:"New password",type:"password"}),Object(I.jsx)(Ce.a.Input,{error:R,name:"confirmPassword",onChange:V,placeholder:"Confirm password",type:"password"}),Object(I.jsx)(ce.a,{color:"teal",onClick:F,type:"submit",children:"Set Password"})]})})]});default:return null}}()})})}var aa=a(393),na={getAll:function(){return A.get("/invoices")},getDocByLoc:function(e){return A.getDocument("/invoices/document",e)},getDocByLocUnauth:function(e){return console.log("getDocByLocUnauth: ",e),A.getDocument("/invoices/u-document",e)},verifyInvoice:function(e){return A.post("/invoices/verify-invoice",{token:e})}};var ra=function(e){var t,a=e.history,n=Object(r.useState)(null),s=Object(D.a)(n,2),i=s[0],c=s[1],l=Object(r.useState)(null),o=Object(D.a)(l,2),u=o[0],d=o[1],j=Object(r.useState)("idle"),b=Object(D.a)(j,2),m=b[0],A=b[1],h=Object(r.useState)(null),f=Object(D.a)(h,2),p=f[0],O=f[1],g=Object(r.useState)(1),x=Object(D.a)(g,2),v=x[0];x[1];return Object(r.useEffect)((function(){var e=$t.a.parse(window.location.search).token;if(console.log("token",e),e){c(e),a.replace(window.location.pathname),A("loading"),na.verifyInvoice(e).then(function(){var e=Object(P.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,na.getDocByLocUnauth(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A("succeeded")}else A("error")}),[a,i]),"loading"===m?t=Object(I.jsx)(se.a,{active:!0,inverted:!0,children:Object(I.jsx)(ie.a,{inverted:!0,content:"Loading"})}):"error"===m?t=Object(I.jsxs)(Be.a,{children:[Object(I.jsx)("p",{children:"There was a problem retrieving your invoice. Please try again by clicking on the link in the email."}),Object(I.jsxs)("p",{children:["Alternatively, you can contact us by clicking "," ",Object(I.jsx)("a",{href:"mailto:robot@thesystem.co.za",children:"here"}),"."]})]}):"succeeded"===m&&(t=Object(I.jsxs)("div",{children:[Object(I.jsx)(aa.a,{file:u,onLoadSuccess:function(e){var t=e.numPages;O(t)},children:Object(I.jsx)(aa.b,{pageNumber:v})}),Object(I.jsxs)("p",{children:["Page ",v," of ",p]})]})),Object(I.jsx)(C.a,{className:"RouteDetermination",children:t})};function sa(){var e=Object(i.g)().pathname;return Object(I.jsxs)(C.a,{fluid:!0,children:[Object(I.jsx)(Gt,{}),Object(I.jsx)(Kt,{}),Object(I.jsxs)(i.d,{children:[Object(I.jsx)(i.a,{from:"/:url*(/+)",to:e.slice(0,-1)}),Object(I.jsx)(i.b,{path:"/",exact:!0,component:Ut}),Object(I.jsx)(i.b,{path:"/login",exact:!0,component:Jt}),Object(I.jsx)(i.b,{path:"/register",exact:!0,component:Xt}),Object(I.jsx)(i.b,{path:"/users/verify-email",exact:!0,component:ta}),Object(I.jsx)(i.b,{path:"/users/forgot-password",exact:!0,component:Qt}),Object(I.jsx)(i.b,{path:"/users/reset-password",exact:!0,component:ea}),Object(I.jsx)(i.b,{path:"/invoices/view-invoice",exact:!0,component:ra}),Object(I.jsx)(N,{component:St}),Object(I.jsx)(i.a,{from:"*",to:"/"})]})]})}d.refreshToken().finally((function(){Object(c.render)(Object(I.jsx)(i.c,{history:g,children:Object(I.jsx)(sa,{})}),document.getElementById("root"))}))}},[[676,1,2]]]);
//# sourceMappingURL=main.36028e8c.chunk.js.map